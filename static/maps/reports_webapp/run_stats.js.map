{"version":3,"sources":["reports_webapp/run_stats.js"],"names":["days_in_month","month","year","Date","getDate","date_by_subtracting_days","date","days","getMonth","getHours","date_by_subtracting_hours","getSeconds","getMilliseconds","hours","getFullYear","refresh","window","location","get_utc_time_hours","data","inp_data","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","hours_array","reload","create_chart","name","time","title","barWidth","margin","width","i","now","chart_zoom","chart_width","height","push","top","right","bottom","left","chart_height","classes","zoom","split","d3","max","css","event","chart","select","attr","append","text","on","bar","selectAll","this","curr_margin","filter","style","transition","size","wdth","path","m_x","l_x","enter","d","scale","round","axis","left_pad","top_pad","trans","curr_day","first","_y2","e","curr_day_text","locale","String","y","linear","range","yAxis","text_height","orient","tickFormat","this_width","call","node","getBoundingClientRect","curr_month","days_array","curr_month_text","create_histogram","domain","toLocaleString","getBBox","formatMinutes","Math","minutes","length","xAxis","svg","x","layout","histogram","bins","ticks","lengths","duration","bar_x","undefined","dx","floor"],"mappings":"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","file":"../../scripts/reports_webapp/run_stats.js","sourcesContent":["function days_in_month(month, year) {\n    return new Date(year, month, 0).getDate();\n}\n\nfunction date_by_subtracting_days(date, days) {\n    return new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate() - days,\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\nfunction date_by_subtracting_hours(date, hours) {\n    return new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours() - hours,\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    );\n}\n\n// Gets the utc time without minutes and seconds\nfunction get_utc_time_hours() {\n    var date = new Date();\n    return new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), 0, 0);\n}\n\n// Refreshes the page for more up to date information\nfunction refresh() {\n    window.location.reload(true);\n}\n\n// This is commented out until we make Reports more responsive.\n// setTimeout(refresh, 60000); //1 minute = 60000 ms\n\nfunction create_chart(inp_data, name, time, title) {\n    // Initialize starting variables\n    var data = inp_data;\n\n    var hours_array = [];\n    var now = get_utc_time_hours();\n    for (var i = 0; i < 24; i++) {\n        hours_array.push(date_by_subtracting_hours(now, i));\n    }\n\n    var days_array = [];\n    var now = get_utc_time_hours();\n    for (var i = 0; i < 30; i++) {\n        days_array.push(date_by_subtracting_days(now, i));\n    }\n\n    var margin = { top: 60, right: 30, bottom: 50, left: 60 };\n    var width = 300;\n    var barWidth = 0;\n    if (time == \"hours\") {\n        barWidth = width / 24;\n    } else if (time == \"days\") {\n        barWidth = width / 30;\n    }\n    var chart_width = width + margin.left + margin.right;\n\n    var chart_zoom = 1.75;\n    var height = 150;\n    if (d3.max(data) != 0) {\n        var zoom = height / d3.max(data);\n    } else {\n        var zoom = 1.0;\n    }\n    var chart_height = height + margin.top + margin.bottom;\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3\n            .selectAll(\".\" + classes[0])\n            .filter(\".\" + classes[1])\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height)\n            .attr(\"width\", chart_width);\n\n        d3\n            .select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom);\n    }\n\n    // Initialize all chart containers to have the correct height\n    $(\".charts\").css(\"height\", chart_height * chart_zoom);\n\n    // Create the chart object\n    var chart = d3\n        .select(\"#\" + name)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .attr(\"viewBox\", \"0 0 \" + chart_width + \" \" + chart_height)\n        .on(\"click\", click);\n\n    // Create bars on the chart and assosciate data with it\n    var bar = chart\n        .selectAll(\"g\")\n        .data(data)\n        .enter()\n        .append(\"g\")\n        .attr(\"transform\", function(d, i) {\n            // Place the bar in the correct place\n            var curr_margin = +margin.left;\n            curr_margin += +(i * barWidth);\n            return \"translate(\" + curr_margin + \",\" + margin.top + \")\";\n        })\n        .on(\"mouseenter\", function(d) {\n            // Show tool tip\n            var i = 1;\n            var size = d;\n\n            while (size >= 10) {\n                size = size / 10;\n                i++;\n            }\n\n            var wdth = i * 4 + 10;\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\n                    \"transform\",\n                    \"translate( \" + (margin.left - 5) + \", \" + (height - d * zoom + +margin.top + 10) + \" )\"\n                )\n                .attr(\"visibility\", \"visible\")\n                .text(d);\n\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .attr(\"width\", wdth + \"px\")\n                .attr(\"height\", \"15px\")\n                .select(\"rect\")\n                .attr(\n                    \"transform\",\n                    \"translate( \" + (+margin.left - wdth) + \", \" + (height - d * zoom + +margin.top) + \" )\"\n                )\n                .attr(\"width\", wdth + \"px\")\n                .attr(\"height\", \"15px\")\n                .attr(\"fill\", \"#ebd9b2\");\n        })\n        .on(\"mouseleave\", function(d) {\n            // Remove tool tip\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\"visibility\", \"hidden\");\n\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .select(\"rect\")\n                .attr(\"width\", \"0\")\n                .attr(\"height\", \"0\")\n                .attr(\"fill\", \"\")\n                .text(d);\n        });\n\n    // Add a title to the chart\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", function(e) {\n            return \"translate( \" + width + \",15 )\";\n        })\n        .text(title);\n\n    // Add an x axis line to the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"axis\")\n        .append(\"path\")\n        .attr(\"class\", \"x\")\n        .attr(\"d\", function(d) {\n            var m_x = margin.left;\n            var m_y = +margin.top + height;\n            var l_x = m_x + width;\n            var l_y = m_y;\n\n            return \"M\" + m_x + \" \" + m_y + \" L \" + l_x + \" \" + l_y;\n        });\n\n    // Declare how high the y axis goes\n    var y = d3.scale.linear().range([height, 0]);\n\n    // Create a yAxis object\n    var yAxis = d3.svg\n        .axis()\n        .scale(y)\n        .orient(\"left\")\n        .tickFormat(function(d) {\n            return d3.round(d * d3.max(data), 0);\n        });\n\n    // Put the y axis on the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", \"y_\" + name)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \")\")\n        .call(yAxis)\n        .select(\".domain\");\n\n    // Put a title for y axis on chart\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"ax_title\")\n        .attr(\"transform\", function(e) {\n            var axis = d3.select(\"#y_\" + name).node();\n            var left_pad = +margin.left - axis.getBoundingClientRect().width - 5;\n            var top_pad = +margin.top + axis.getBoundingClientRect().height / 2 - 30;\n            var trans = \"translate(\" + left_pad + \",\" + top_pad + \")rotate(-90)\";\n\n            return trans;\n        })\n        .text(\"Number of Jobs\");\n\n    // Add color to the chart's bars\n    bar\n        .append(\"rect\")\n        .attr(\"y\", function(d) {\n            return height - d * zoom;\n        })\n        .attr(\"height\", function(d) {\n            return d * zoom;\n        })\n        .attr(\"width\", barWidth - 1);\n\n    // Append x axis\n    if (time == \"hours\") {\n        // Append hour lines\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( \" + barWidth / 2 + \", \" + height + \")\";\n            });\n\n        // Append hour numbers\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", \"translate( 10, \" + (height + 10) + \" )\")\n            .text(function(d, i) {\n                var time = \"0000\";\n\n                if (hours_array[i].getHours() < 10) {\n                    time = \"0\" + String(hours_array[i].getHours());\n                } else {\n                    time = hours_array[i].getHours();\n                }\n\n                return time;\n            });\n\n        // Append day lines\n        var curr_day = \"\";\n        var first = false;\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", function(d, i) {\n                var _y2 = 0;\n\n                if (hours_array[i].getDate() != curr_day) {\n                    if (!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n\n                    curr_day = hours_array[i].getDate();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( 0, \" + height + \")\";\n            });\n\n        // Append day numbers\n        curr_day = \"\";\n        curr_day_text = \"\";\n        first = false;\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text(function(d, i) {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if (hours_array[i].getDate() != curr_day_text) {\n                    time = String(hours_array[i].toLocaleString(locale, { month: \"long\" }));\n                    time += \" \" + String(hours_array[i].getDate());\n\n                    curr_day_text = hours_array[i].getDate();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3\n                    .select(this)\n                    .node()\n                    .getBBox().width;\n\n                if (hours_array[i].getDate() != curr_day) {\n                    if (!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n\n                    curr_day = hours_array[i].getDate();\n                }\n\n                return \"translate( \" + (this_width + 2) + \", \" + text_height + \" )\";\n            });\n    } else if (time == \"days\") {\n        // Append day lines\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 3)\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( \" + barWidth / 2 + \", \" + height + \")\";\n            });\n\n        // Append day numbers\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,0,0)\")\n            .attr(\"transform\", \"translate( 9, \" + (height + 10) + \" )\")\n            .text(function(d, i) {\n                var time = \"0000\";\n\n                if (days_array[i].getDate() < 10) {\n                    time = \"0\" + String(days_array[i].getDate());\n                } else {\n                    time = days_array[i].getDate();\n                }\n\n                return time;\n            });\n\n        // Append month lines\n        var curr_month = \"\";\n        var first = false;\n        bar\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", function(d, i) {\n                var _y2 = 0;\n\n                if (days_array[i].getMonth() != curr_month) {\n                    if (!first) {\n                        _y2 = 27;\n                        first = true;\n                    } else {\n                        _y2 = 20;\n                    }\n\n                    curr_month = days_array[i].getMonth();\n                }\n\n                return _y2;\n            })\n            .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"pointer-events\", \"none\")\n            .attr(\"transform\", function(d, i) {\n                return \"translate( 0, \" + height + \")\";\n            });\n\n        // Append month numbers\n        curr_month = \"\";\n        curr_month_text = \"\";\n        first = false;\n        bar\n            .append(\"text\")\n            .attr(\"fill\", \"rgb(0,100,0)\")\n            .attr(\"pointer-events\", \"none\")\n            .text(function(d, i) {\n                var time = \"\";\n                var locale = \"en-us\";\n\n                if (days_array[i].getMonth() != curr_month_text) {\n                    time = String(days_array[i].toLocaleString(locale, { month: \"long\" }));\n                    time += \" \" + String(days_array[i].getFullYear());\n\n                    curr_month_text = days_array[i].getMonth();\n                }\n\n                return time;\n            })\n            .attr(\"transform\", function(d, i) {\n                var text_height = height;\n                var this_width = d3\n                    .select(this)\n                    .node()\n                    .getBBox().width;\n\n                if (days_array[i].getMonth() != curr_month) {\n                    if (!first) {\n                        text_height += 26;\n                        first = true;\n                    } else {\n                        text_height += 18;\n                    }\n\n                    curr_month = days_array[i].getMonth();\n                }\n\n                return \"translate( \" + (this_width + 2) + \", \" + text_height + \" )\";\n            });\n    }\n\n    // Put an invisible tool tip on the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\").append(\"text\");\n\n    // Initialize initial zoomed charts\n    if (name == \"jc_dy_chart\" || name == \"jc_hr_chart\") {\n        d3\n            .select(\"#\" + name)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom)\n            .style(\"cursor\", \"default\");\n    }\n}\n\n//============================================================================================================\n\nfunction create_histogram(inp_data, name, title) {\n    // Initialize initial variables\n    // inp_data is an array of numbers that are the amount of minutes per run\n    var data = inp_data;\n\n    var chart_zoom = 1.75;\n    var margin = { top: 60, right: 30, bottom: 50, left: 60 };\n\n    var height = 150;\n    var chart_height = height + margin.top + margin.bottom;\n\n    var width = 300;\n    var chart_width = width + margin.left + margin.right;\n\n    // Cereate x axis metadata\n    // Used for x axis, histogram creation, and bar initialization\n    var x = d3.scale\n        .linear()\n        .domain([0, d3.max(data)])\n        .range([0, width]);\n\n    // Generate a histogram using twenty uniformly-spaced bins.\n    var data = d3.layout.histogram().bins(x.ticks(20))(data);\n\n    // Create an array of the sizes of the bars\n    var lengths = [];\n    for (var i = 0; i < data.length; i++) {\n        lengths.push(data[i].length);\n    }\n\n    // Find the amount needed to magnify the bars\n    if (d3.max(data) != 0) {\n        var zoom = height / d3.max(lengths);\n    } else {\n        var zoom = 1.0;\n    }\n\n    // Create y axis metadata\n    // Used for y axis and bar initialization\n    var y = d3.scale\n        .linear()\n        .domain([\n            0,\n            d3.max(data, function(d) {\n                return d.y;\n            })\n        ])\n        .range([height, 0]);\n\n    // Function for zooming in and out of charts\n    function click() {\n        var classes = d3.select(this).attr(\"class\");\n        classes = classes.split(\" \");\n        d3\n            .selectAll(\".\" + classes[0])\n            .filter(\".\" + classes[1])\n            .style(\"cursor\", \"zoom-in\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height)\n            .attr(\"width\", chart_width);\n\n        d3\n            .select(this)\n            .style(\"cursor\", \"default\")\n            .transition()\n            .duration(750)\n            .attr(\"height\", chart_height * chart_zoom)\n            .attr(\"width\", chart_width * chart_zoom);\n    }\n\n    // Formatter for x axis times (converting minutes to HH:MM).\n    var formatMinutes = function(d) {\n        var hours = Math.floor(d / 60),\n            minutes = Math.floor(d - hours * 60);\n\n        if (hours < 10) {\n            hours = \"0\" + hours;\n        }\n        if (minutes < 10) {\n            minutes = \"0\" + minutes;\n        }\n\n        return hours + \":\" + minutes;\n    };\n\n    // Create a chart object\n    var chart = d3\n        .select(\"#\" + name)\n        .attr(\"viewBox\", \"0 0 \" + chart_width + \" \" + chart_height)\n        .attr(\"width\", chart_width)\n        .attr(\"height\", chart_height)\n        .attr(\"preserveAspectRatio\", \"xMidYMin\")\n        .on(\"click\", click);\n\n    // Put title on chart\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"title\")\n        .attr(\"transform\", function(e) {\n            return \"translate( \" + width + \",15 )\";\n        })\n        .text(title);\n\n    // Put bars on chart\n    var bar = chart\n        .selectAll(\".bar\")\n        .data(data)\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"bar\")\n        .attr(\"transform\", function(d) {\n            return \"translate(\" + (+x(d.x) + +margin.left) + \",\" + (+y(d.y) + +margin.top) + \")\";\n        })\n        .on(\"mouseenter\", function(d) {\n            // Show tool tip\n            var i = 0,\n                size = d.length;\n\n            while (size >= 1) {\n                size = size / 10;\n                i++;\n            }\n            var wdth = i * 4 + 10;\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\n                    \"transform\",\n                    \"translate( \" + (margin.left - 5) + \", \" + (height - d.length * zoom + +margin.top + 10) + \" )\"\n                )\n                .attr(\"visibility\", \"visible\")\n                .text(d.length);\n\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .attr(\"width\", wdth + \"px\")\n                .attr(\"height\", \"15px\")\n                .select(\"rect\")\n                .attr(\n                    \"transform\",\n                    \"translate( \" + (+margin.left - wdth) + \", \" + (height - d.length * zoom + +margin.top) + \" )\"\n                )\n                .attr(\"width\", wdth + \"px\")\n                .attr(\"height\", \"15px\")\n                .attr(\"fill\", \"#ebd9b2\");\n        })\n        .on(\"mouseleave\", function(d) {\n            // Remove tool tip\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .select(\"text\")\n                .attr(\"visibility\", \"hidden\");\n\n            d3\n                .select(d3.event.path[1])\n                .select(\".tool_tip\")\n                .select(\"rect\")\n                .attr(\"width\", \"0\")\n                .attr(\"height\", \"0\")\n                .attr(\"fill\", \"\");\n        });\n\n    // Create bar width\n    var bar_x;\n    if (data[0] == undefined) {\n        bar_x = 1;\n    } else {\n        bar_x = x(data[0].dx);\n    }\n\n    // Add color to bar\n    bar\n        .append(\"rect\")\n        .attr(\"x\", 1)\n        .attr(\"width\", bar_x - 1)\n        .attr(\"height\", function(d) {\n            return height - y(d.y);\n        });\n\n    // Create x axis\n    var xAxis = d3.svg\n        .axis()\n        .scale(x)\n        .orient(\"bottom\")\n        .tickFormat(formatMinutes);\n\n    // Add x axis to chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"id\", \"x_\" + name)\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + (+height + +margin.top) + \")\")\n        .call(xAxis);\n\n    // Add a title to the x axis\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"ax_title\")\n        .attr(\"transform\", function(e) {\n            var axis = d3.select(\"#x_\" + name).node();\n            var left_pad = +margin.left + axis.getBoundingClientRect().width / 2 + 30;\n            var top_pad = +margin.top + height + axis.getBoundingClientRect().height + 10;\n            var trans = \"translate(\" + left_pad + \",\" + top_pad + \")\";\n\n            return trans;\n        })\n        .text(\"ETA - hrs:mins\");\n\n    // Create y axis\n    var yAxis = d3.svg\n        .axis()\n        .scale(y)\n        .orient(\"left\");\n\n    // Add y axis to chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"y axis\")\n        .attr(\"id\", \"y_\" + name)\n        .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \")\")\n        .call(yAxis);\n\n    // Add a title to the y axis\n    chart\n        .append(\"g\")\n        .append(\"text\")\n        .attr(\"class\", \"ax_title\")\n        .attr(\"transform\", function(e) {\n            var axis = d3.select(\"#y_\" + name).node();\n            var left_pad = +margin.left - axis.getBoundingClientRect().width - 5;\n            var top_pad = +margin.top + axis.getBoundingClientRect().height / 2 - 30;\n            var trans = \"translate(\" + left_pad + \",\" + top_pad + \")rotate(-90)\";\n\n            return trans;\n        })\n        .text(\"Number of Jobs\");\n\n    // Put an invisible tool tip on the chart\n    chart\n        .append(\"g\")\n        .attr(\"class\", \"tool_tip\")\n        .append(\"rect\");\n    chart.select(\".tool_tip\").append(\"text\");\n}\n"]}