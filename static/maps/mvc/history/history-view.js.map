{"version":3,"file":"history-view.js","sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HISTORY_PREFS","HDA_LI","HDCA_LI","USER","ERROR_MODAL","faIconButton","BASE_MVC","_l","_super","ModelListPanel","HistoryView","extend","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","FETCH_COLLECTION_COUNTS_DELAY","initialize","attributes","call","this","linkTarget","detailedFetchTimeoutId","_createDefaultCollection","history","model","freeModel","clearUpdateTimeout","_clearDetailedFetchTimeout","clearTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","self","_","delay","contents","fetchCollectionCounts","views:ready view:attached view:removed","_renderSelectButton","view:attached","scrollTo","loadHistory","historyId","contentsOptions","silent","info","setModel","History","id","trigger","fetchWithContents","always","render","refreshContents","refresh","$","when","_setUpCollectionListeners","listenTo","collection","fetching-more","_toggleContentsLoadingIndicator","$emptyMessage","hide","fetching-more-done","_showLoadingIndicator","speed","$indicator","$el","html","text","slideDown","isUndefined","fxSpeed","_hideLoadingIndicator","slideUp","remove","_buildNewRender","$newRender","$where","multiselectActions","length","views","hideSelectors","find","$existing","title","classes","faIcon","prependTo","_renderEmptyMessage","$whereTo","$emptyMsg","empty","get","active","append","show","searchFor","haveSearchDetails","$scrollContainer","$list","renderItems","models","_filterCollection","_renderPagination","_renderSomeItems","toggle","$paginationControls","shouldPaginate","templates","pagination","current","currentPage","last","getLastPage","tooltip","map","m","view","_createItemView","push","_renderItemView$el","_filterItem","includeHidden","hidden","includeDeleted","isDeletedOrPurged","_getItemViewClass","contentType","TypeError","_getItemViewOptions","expanded","storage","isExpanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","panel","v","addExpanded","collapsed","removeExpanded","collapseAll","clearExpanded","getSelectedModels","events","clone","click .show-selectors-btn","click > .controls .prev","click > .controls .next","change > .controls .pages","click .messages [class$=message]","_clickPrevPage","fetchPrevPage","_clickNextPage","fetchNextPage","_changePageSelect","ev","page","currentTarget","val","fetchPage","toggleShowDeleted","undefined","setIncludeDeleted","fetchCurrentPage","renderAll","toggleShowHidden","store","setIncludeHidden","_firstSearch","inputSelector","log","searchItems","searchInput","progressivelyFetchDetails","progress","response","limit","offset","done","clearSearch","status","readyState","isString","message","errorModal","badGatewayErrorModal","ajaxErrorModal","clearMessages","$target","$messages","children","fadeOut","scrollToHid","hid","scrollToItem","first","viewsWhereModel","ordinalIndicator","number","numStr","charAt","toString","mainTemplate","wrapTemplate","controlsTemplate","paginationTemplate","el","controls"],"mappings":"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"}