{"version":3,"sources":["../../../src/mvc/history/history-view.js"],"names":["define","LIST_VIEW","HISTORY_MODEL","HISTORY_CONTENTS","HDA_LI","HDCA_LI","USER","faIconButton","PopupMenu","BASE_MVC","_l","logNamespace","HistoryPrefs","SessionStorageModel","extend","defaults","expandedIds","show_deleted","show_hidden","addExpanded","model","key","this","save","_","get","object","id","removeExpanded","omit","toString","storageKeyPrefix","historyStorageKey","historyId","Error","clearAll","sessionStorage","indexOf","removeItem","_super","ModelListPanel","HistoryView","_logNamespace","HDAViewClass","HDAListItemView","HDCAViewClass","HDCAListItemView","collectionClass","HistoryContents","modelCollectionKey","tagName","className","prototype","emptyMsg","noneFoundMsg","searchPlaceholder","initialize","attributes","call","linkTarget","freeModel","clearUpdateTimeout","_setUpListeners","on","error","xhr","options","msg","details","errorHandler","loading-done","views","length","trigger","views:ready view:attached view:removed","view","_renderSelectButton","loadHistoryWithDetails","historyFn","contentsFn","info","detailIdsFn","historyData","values","loadHistory","FETCH_COLLECTION_COUNTS_DELAY","panel","History","getHistoryData","initiallyExpanded","_loadHistoryFromXHR","fail","where","history","done","delay","contents","fetchCollectionCounts","always","then","historyJSON","contentsJSON","JSONToModel","render","refreshContents","refresh","$","when","newHistoryJSON","newHdaJSON","log","setModel","_setUpWebStorage","storage","stopListening","isObject","set","isBoolean","listenTo","change:show_deleted","newVal","showDeleted","change:show_hidden","showHidden","undefined","_buildNewRender","$newRender","$where","$el","multiselectActions","hideSelectors","find","remove","$existing","title","classes","faIcon","prependTo","_getItemViewClass","contentType","TypeError","_filterItem","hidden","isDeletedOrPurged","_getItemViewOptions","expanded","hasUser","ownedByCurrUser","_setUpItemViewListeners","v","collapsed","getSelectedModels","collection","events","clone","click .show-selectors-btn","click .messages [class$=message]","toggleShowDeleted","show","store","renderItems","toggleShowHidden","_firstSearch","searchFor","inputSelector","haveDetails","searchItems","searchInput","fetchAllDetails","silent","status","readyState","parsed","_parseErrorMessage","$messages","is","displayMessage","message","once","sentryId","user","Galaxy","_bePolite","raven","window","Raven","isFunction","lastEventId","agent","navigator","userAgent","url","lastAjax","data","source","toJSON","User","getAllResponseHeaders","responseHeaders","compact","split","map","header","type","scrollToTop","$msgContainer","$msg","addClass","html","isEmpty","$detailsLink","click","modal","_messageToModalOptions","append","functions","text","JSON","stringify","pre","body","buttons","Ok","hide","clearMessages","ev","$target","isUndefined","children","currentTarget","fadeOut","fxSpeed","scrollToHid","hid","scrollToItem","first","viewsWhereModel","templates","controlsTemplate","wrapTemplate","controls"],"mappings":"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","file":"history-view.js"}