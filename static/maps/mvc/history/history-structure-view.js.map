{"version":3,"sources":["../../../src/mvc/history/history-structure-view.js"],"names":["define","JobDAG","JOB","JOB_LI","HISTORY_CONTENT","DATASET_LI","BASE_MVC","_l","logNamespace","window","HistoryStructureComponent","Backbone","View","extend","LoggableMixin","_logNamespace","className","_INITIAL_ZOOM_LEVEL","_MIN_ZOOM_LEVEL","_LINK_ID_SEP","_VERTEX_NAME_DATA_KEY","JobItemClass","JobListItemView","ContentItemClass","DatasetListItemView","initialize","attributes","this","log","component","_liMap","_createVertexItems","zoomLevel","layout","_createLayout","layoutOptions","view","eachVertex","vertex","li","type","data","job","_createJobListItem","_createContentListItem","name","debug","jobData","Job","outputModels","_","map","get","output","src","typeId","typeIdStr","id","model","contents","outputCollection","reset","historyId","tool","listenTo","renderGraph","foldout","content","history_content_type","layoutDefaults","linkSpacing","linkWidth","linkHeight","jobWidth","jobHeight","jobSpacing","linkAdjX","linkAdjY","options","defaults","clone","vertices","values","nodeMap","links","svg","width","height","forEach","v","j","node","x","y","edges","e","link","source","target","push","render","$el","html","join","$graph","appendTo","$","_render","_updateLayout","css","renderSVG","position","top","left","is","delay","size","each","jobId","Math","max","x1","y1","x2","y2","JSON","stringify","highlightConnect","d","d3","select","classed","addClass","unhighlightConnect","removeClass","empty","append","attr","connections","selectAll","enter","on","_connectionPath","CURVE_X","controlY","events","mouseover .graph > .list-item","ev","highlightConnected","currentTarget","mouseout  .graph > .list-item","jobElement","highlight","undefined","jobClassFn","jQuery","prototype","connectionClass","$hoverTarget","call","edge","ancestorId","ancestorLi","eachEdge","descendantId","descendantLi","zoom","level","min","toString","VerticalHistoryStructureComponent","nodeId","CURVE_Y","controlX","HistoryStructureView","_layoutToComponentClass","horizontal","vertical","_DEFAULT_LAYOUT","contains","keys","_processTools","tools","_processJobs","jobs","_createDAG","dag","historyContents","toJSON","excludeSetMetadata","excludeErroredJobs","_createComponents","structure","componentViews","weakComponentGraphArray","componentGraph","_createComponent","ComponentClass","$components","changeLayout","Error"],"mappings":"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","file":"history-structure-view.js"}