{"version":3,"file":"history-view-edit-current.js","sources":["../../../src/mvc/history/history-view-edit-current.js"],"names":["define","HISTORY_MODEL","HISTORY_VIEW_EDIT","BASE_MVC","_l","HistoryViewPrefs","SessionStorageModel","extend","defaults","tagsEditorShown","annotationEditorShown","scrollPosition","toString","JSON","stringify","this","toJSON","storageKey","_super","HistoryViewEdit","CurrentHistoryView","className","prototype","HDCAViewClass","foldoutStyle","initialize","attributes","preferences","_","id","pick","keys","call","panelStack","currentContentId","_setUpListeners","panel","on","set","loadCurrentHistory","loadHistory","url","Galaxy","root","switchToHistory","historyId","user","isAnonymous","trigger","$","when","createNewHistory","setModel","model","render","log","checkForUpdates","_setUpModelListeners","listenTo","change:nice_size change:size","arguments","change:id","once","_setUpCollectionListeners","collection","get","storage","removeItemView","_setUpBehaviors","$where","$el","_debouncedScrollCaptureHandler","debounce","is","scrollTop","$scrollContainer","off","_buildNewRender","$newRender","find","prependTo","_renderQuotaMessage","$whereTo","templates","quotaMsg","emptyMsg","join","_renderTags","tagsEditor","toggle","hidden","_renderAnnotation","annotationEditor","_swapNewRender","delay","pos","scrollTo","_attachItems","_setCurrentContentById","addItemView","options","view","length","_collapseDrilldownPanel","_setUpItemViewListeners","expanded:drilldown","v","drilldown","_expandDrilldownPanel","collapsed:drilldown","setCurrentContent","removeClass","addClass","viewFromModelId","push","add","$list","hide","parentName","append","pop","events","clone","click .uploader-link","ev","upload","show","click .get-data-link","$toolMenu","parent","click","listenToGalaxy","galaxy","galaxy_main:load","data","pathToMatch","fullpath","hdaId","useToURLRegexMap","display","edit","report_error","rerun","show_params","regex","result","match","center-panel:load","connectToQuotaMeter","quotaMeter","showQuotaMessage","hideQuotaMessage","isOverQuota","clearMessages","$target","isUndefined","$messages","children","currentTarget","not","fadeOut","fxSpeed","remove","$msg","slideDown","slideUp","_filterAndUpdate","filterParams","updateWhat","self","contents","fetch","filters","then","ajaxQueue","Backbone","Model","save","done","currHistoryPanel","renderItems","unhideHidden","confirm","visible","deleted","purged","jQuery","deleteHidden","quotaMsgTemplate","wrapTemplate"],"mappings":"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"}