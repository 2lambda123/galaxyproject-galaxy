{"version":3,"sources":["mvc/history/hdca-model.js"],"names":["define","DC_MODEL","_l","options","_super","attributes","this","urlRoot","type","call","ListOfListsDC","ListOfListsDatasetCollection","ListDC","ListDatasetCollection","PairDC","PairDatasetCollection","ListPairedDC","ListPairedDatasetCollection","buildHDCASave","HistoryListDatasetCollection","extend","hcontentMixin","defaults","_","clone","prototype","history_content_type","collection_type","save","toString","HistoryPairDatasetCollection","model_class","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","join"],"mappings":"aAAAA,QAAQ,kCAAmC,oCAAqC,sBAAuB,SACnGC,EADJD,EAKIE,GAuBYC,SAAAA,EAAAC,GACAC,OAAAA,SAAaA,EAAAA,GAOzB,OANYA,KAAAA,WACHF,EAAAA,OACMC,IAAAE,KAAAC,QAAkBF,KAAYF,IAAAA,cAArC,aAPJE,EAAAA,OASHG,KAAA,sBAEDJ,EAAAK,KAAAH,KAAAD,EAAAF,IApBA,IAIIO,EAAgBT,EAASU,oBAHzBC,EAASX,EAASY,sBAKtBC,EAAAb,EAAAc,sBACAC,EAAAf,EAAAgB,4BACAP,EAASQ,EAATP,6BAxBJ,OAqHQQ,6BA5E2DP,EAAAQ,OAAAC,GAAAD,QADNE,SAAAC,EAAAH,OAAAG,EAAAC,MAAAZ,EAAAa,UAAAH,WAE7CI,qBAAsB,qBAK1BC,gBAAA,OACMT,YAAcN,wCAIhBgB,KAAAV,EAAmBN,EAAOa,UAAUI,MADxCA,SAAU,WAMlB,MAAA,UAAAjB,EAAAa,UAAAI,SAAApB,KAAAH,SA6DIwB,6BApDqBhB,EAAAM,OAAAC,GAAAD,QAHjBE,SAAUC,EAAEH,OAAOG,EAAEC,MAAMV,EAAOW,UAAUH,WAM5CI,qBAAA,qBACMR,gBAAcJ,SAJhBiB,YAAa,wCAShBH,KAAAV,EAAAJ,EAAAW,UAAAG,MAITC,SAAA,WACA,MAAA,UAAAf,EAAAW,UAAAI,SAAApB,KAAAH,SAuCI0B,mCAtCqChB,EAAaI,OAAOC,GAAeD,QAOxEE,SAAAC,EAAAH,OAAAG,EAAAC,MAAAR,EAAAS,UAAAH,WACAM,qBAAoBZ,qBALhBW,gBAAiB,cAOrBI,YAAA,wCAVJH,KAAAV,EAAAF,EAAAS,UAAAG,MAiBAC,SAAA,WACII,MAAAA,UAAAA,EAAAA,UAAsCvB,SAAcU,KAAOC,SAqB3DY,oCArBsCvB,EAAcU,OAAOC,GAAeD,QAO1EE,SAAAC,EAAAH,OAAAG,EAAAC,MAAAd,EAAAe,UAAAH,WACAM,qBAAoBlB,qBALhBiB,gBAAiB,YAOrBI,YAAA,wCAVJH,KAAAV,EAAAR,EAAAe,UAAAG,MAiBAC,SAAO,WACHV,OAAAA,uCAA8BA,KAAAA,IAD3B,QAAA,KAAAe,KAAA","file":"../../../scripts/mvc/history/hdca-model.js","sourcesContent":["define([\"mvc/collection/collection-model\", \"mvc/history/history-content-model\", \"utils/localization\"], function(\n    DC_MODEL,\n    HISTORY_CONTENT,\n    _l\n) {\n    \"use strict\";\n\n    /*==============================================================================\n\nModels for DatasetCollections contained within a history.\n\nTODO:\n    these might be compactable to one class if some duplication with\n    collection-model is used.\n\n==============================================================================*/\n    var hcontentMixin = HISTORY_CONTENT.HistoryContentMixin,\n        ListDC = DC_MODEL.ListDatasetCollection,\n        PairDC = DC_MODEL.PairDatasetCollection,\n        ListPairedDC = DC_MODEL.ListPairedDatasetCollection,\n        ListOfListsDC = DC_MODEL.ListOfListsDatasetCollection;\n\n    //==============================================================================\n    /** Override to post to contents route w/o id. */\n    function buildHDCASave(_super) {\n        return function _save(attributes, options) {\n            if (this.isNew()) {\n                options = options || {};\n                options.url = this.urlRoot + this.get(\"history_id\") + \"/contents\";\n                attributes = attributes || {};\n                attributes.type = \"dataset_collection\";\n            }\n            return _super.call(this, attributes, options);\n        };\n    }\n\n    //==============================================================================\n    /** @class Backbone model for List Dataset Collection within a History.\n */\n    var HistoryListDatasetCollection = ListDC.extend(hcontentMixin).extend(\n        /** @lends HistoryListDatasetCollection.prototype */ {\n            defaults: _.extend(_.clone(ListDC.prototype.defaults), {\n                history_content_type: \"dataset_collection\",\n                collection_type: \"list\",\n                model_class: \"HistoryDatasetCollectionAssociation\"\n            }),\n\n            /** Override to post to contents route w/o id. */\n            save: buildHDCASave(ListDC.prototype.save),\n\n            /** String representation. */\n            toString: function() {\n                return \"History\" + ListDC.prototype.toString.call(this);\n            }\n        }\n    );\n\n    //==============================================================================\n    /** @class Backbone model for Pair Dataset Collection within a History.\n *  @constructs\n */\n    var HistoryPairDatasetCollection = PairDC.extend(hcontentMixin).extend(\n        /** @lends HistoryPairDatasetCollection.prototype */ {\n            defaults: _.extend(_.clone(PairDC.prototype.defaults), {\n                history_content_type: \"dataset_collection\",\n                collection_type: \"paired\",\n                model_class: \"HistoryDatasetCollectionAssociation\"\n            }),\n\n            /** Override to post to contents route w/o id. */\n            save: buildHDCASave(PairDC.prototype.save),\n\n            /** String representation. */\n            toString: function() {\n                return \"History\" + PairDC.prototype.toString.call(this);\n            }\n        }\n    );\n\n    //==============================================================================\n    /** @class Backbone model for List of Pairs Dataset Collection within a History. */\n    var HistoryListPairedDatasetCollection = ListPairedDC.extend(hcontentMixin).extend({\n        defaults: _.extend(_.clone(ListPairedDC.prototype.defaults), {\n            history_content_type: \"dataset_collection\",\n            collection_type: \"list:paired\",\n            model_class: \"HistoryDatasetCollectionAssociation\"\n        }),\n\n        /** Override to post to contents route w/o id. */\n        save: buildHDCASave(ListPairedDC.prototype.save),\n\n        /** String representation. */\n        toString: function() {\n            return \"History\" + ListPairedDC.prototype.toString.call(this);\n        }\n    });\n\n    //==============================================================================\n    /** @class Backbone model for List of Lists Dataset Collection within a History. */\n    var HistoryListOfListsDatasetCollection = ListOfListsDC.extend(hcontentMixin).extend({\n        defaults: _.extend(_.clone(ListOfListsDC.prototype.defaults), {\n            history_content_type: \"dataset_collection\",\n            collection_type: \"list:list\",\n            model_class: \"HistoryDatasetCollectionAssociation\"\n        }),\n\n        /** Override to post to contents route w/o id. */\n        save: buildHDCASave(ListOfListsDC.prototype.save),\n\n        /** String representation. */\n        toString: function() {\n            return [\"HistoryListOfListsDatasetCollection(\", this.get(\"name\"), \")\"].join(\"\");\n        }\n    });\n\n    //==============================================================================\n    return {\n        HistoryListDatasetCollection: HistoryListDatasetCollection,\n        HistoryPairDatasetCollection: HistoryPairDatasetCollection,\n        HistoryListPairedDatasetCollection: HistoryListPairedDatasetCollection,\n        HistoryListOfListsDatasetCollection: HistoryListOfListsDatasetCollection\n    };\n});\n"]}