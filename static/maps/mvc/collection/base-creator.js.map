{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["define","CollectionCreatorMixin","what","clear","_validationWarning","VALIDATION_CLASS","add","this","$","removeClass","addClass","_changeHideOriginals","ev","hideOriginals","prop","_changeName","_getName","_nameCheckForEnter","keyCode","blocking","_clickCreate","_","escape","val","_clickMoreHelp","stopPropagation","hide","_clickLessHelp","show","_toggleHelp","toggleClass","toggle","_showAlert","message","alertClass","attr","_hideAlert","_cancelCreate","oncancel","call","createList","name","_setUpCommonSettings","_renderFooter","attributes","self","defaultHideSourceItems","speed","callback","$footer","empty","html","templates","footer","each","footerSettings","property","selector","template","main","join"],"mappings":"aAAAA,UAAW,WAgIP,OACIC,wBA7HAA,mBAAAA,SAAyBC,EAAAC,GAEzBC,SAAAA,IACQC,EAAAA,KAAAA,EAAAA,oBAAmBC,IAAAC,KAAvBC,EAAA,4BACIN,KAAAA,EAAAA,oBACAA,QACKM,UAILL,GACAD,EAAOA,GAAQK,KAAKC,EAAE,wBACjBC,YAXb,sBAaQP,EAAKQ,SAbb,uBAiBAC,qBAAsB,SAAAC,GAClBL,KAAKM,cAAgBN,KAAKC,EAAE,mBAAmBM,KAAK,YAKxDC,YAAa,SAAAH,GACTL,KAAKH,mBAAmB,SAAUG,KAAKS,aAI3CC,mBAAoB,SAAAL,GACG,KAAfA,EAAGM,SAAmBX,KAAKY,UAC3BZ,KAAKa,gBAKbJ,SAAU,WACN,OAAOK,EAAEC,OAAOf,KAAKC,EAAE,oBAAoBe,QAK/CC,eAAgB,SAAAZ,GACZA,EAAGa,kBACHlB,KAAKC,EAAE,cAAcE,SAAS,YAC9BH,KAAKC,EAAE,cAAckB,QAGzBC,eAAgB,SAAAf,GACZA,EAAGa,kBACHlB,KAAKC,EAAE,cAAcC,YAAY,YACjCF,KAAKC,EAAE,cAAcoB,QAGzBC,YAAa,SAAAjB,GACTA,EAAGa,kBACHlB,KAAKC,EAAE,cAAcsB,YAAY,YACjCvB,KAAKC,EAAE,cAAcuB,UAIzBC,WAAY,SAAAC,EAAAC,GACRA,EAAaA,GAAc,eAC3B3B,KAAKC,EAAE,cAAckB,OACrBnB,KAAKC,EAAE,kBAhEc2B,KAAA,QAAA,2BAuEzBzB,SAAAwB,GACAE,OACS5B,KAAE,kBACFA,KAAEyB,IAGXI,WAAAA,SAAeJ,GACX1B,KAAIC,EAAA,cAAY8B,OACZ/B,KAAAC,EAAA,kBAAmBkB,QAF3BW,cAAe,SAASzB,GAMxB,mBAAAL,KAAA+B,UACAlB,KAAAA,SAAcmB,KAAAhC,OAKNa,aAAKoB,SAAL5B,GACH,IAAA6B,EAAAlC,KAAAS,WA1FoByB,EA6FzBC,KAAAA,UACInC,KAAKM,WAAL4B,GAPIlC,KAAKH,mBAAmB,SAWhCuC,qBAAe,SAAAC,GACXrC,KAAIsC,cAAJD,EAAAE,yBAAA,GAMCH,cAFD,SAAAI,EAAAC,GAGA,IAAIH,EAAOtC,KACP0C,EAAO1C,KAAAC,EAAA,WACV0C,QACDC,KAAOF,KAAPG,UAAAC,UAAA,OA7GqBhC,EAAAiC,KAAA/C,KAAAgD,eAAA,SAAAC,EAAAC,GAwGjBZ,EAAKrC,EAAEiD,GAAU3C,KAAK,UAAW+B,EAAKW,MAWlC,mBAFAE,KAAFpB,UADS/B,KAAAC,EAAA,sBAAAoB,OAHRqB,GAgBXhD,mBADJ0D,KAAAtC,EAAAqC,UATgB,8CACA,yDACA,+CACFE,KAAK","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["define([], function() {\n    /* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\n    var CollectionCreatorMixin = {\n        /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n        _validationWarning: function(what, clear) {\n            var VALIDATION_CLASS = \"validation-warning\";\n            if (what === \"name\") {\n                what = this.$(\".collection-name\").add(this.$(\".collection-name-prompt\"));\n                this.$(\".collection-name\")\n                    .focus()\n                    .select();\n            }\n            if (clear) {\n                what = what || this.$(\".\" + VALIDATION_CLASS);\n                what.removeClass(VALIDATION_CLASS);\n            } else {\n                what.addClass(VALIDATION_CLASS);\n            }\n        },\n\n        _changeHideOriginals: function(ev) {\n            this.hideOriginals = this.$(\".hide-originals\").prop(\"checked\");\n        },\n\n        // ........................................................................ footer\n        /** handle a collection name change */\n        _changeName: function(ev) {\n            this._validationWarning(\"name\", !!this._getName());\n        },\n\n        /** check for enter key press when in the collection name and submit */\n        _nameCheckForEnter: function(ev) {\n            if (ev.keyCode === 13 && !this.blocking) {\n                this._clickCreate();\n            }\n        },\n\n        /** get the current collection name */\n        _getName: function() {\n            return _.escape(this.$(\".collection-name\").val());\n        },\n\n        // ........................................................................ header\n        /** expand help */\n        _clickMoreHelp: function(ev) {\n            ev.stopPropagation();\n            this.$(\".main-help\").addClass(\"expanded\");\n            this.$(\".more-help\").hide();\n        },\n        /** collapse help */\n        _clickLessHelp: function(ev) {\n            ev.stopPropagation();\n            this.$(\".main-help\").removeClass(\"expanded\");\n            this.$(\".more-help\").show();\n        },\n        /** toggle help */\n        _toggleHelp: function(ev) {\n            ev.stopPropagation();\n            this.$(\".main-help\").toggleClass(\"expanded\");\n            this.$(\".more-help\").toggle();\n        },\n\n        /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n        _showAlert: function(message, alertClass) {\n            alertClass = alertClass || \"alert-danger\";\n            this.$(\".main-help\").hide();\n            this.$(\".header .alert\")\n                .attr(\"class\", \"alert alert-dismissable\")\n                .addClass(alertClass)\n                .show()\n                .find(\".alert-message\")\n                .html(message);\n        },\n        /** hide the alerts at the top */\n        _hideAlert: function(message) {\n            this.$(\".main-help\").show();\n            this.$(\".header .alert\").hide();\n        },\n\n        _cancelCreate: function(ev) {\n            if (typeof this.oncancel === \"function\") {\n                this.oncancel.call(this);\n            }\n        },\n\n        /** attempt to create the current collection */\n        _clickCreate: function(ev) {\n            var name = this._getName();\n            if (!name) {\n                this._validationWarning(\"name\");\n            } else if (!this.blocking) {\n                this.createList(name);\n            }\n        },\n\n        _setUpCommonSettings: function(attributes) {\n            this.hideOriginals = attributes.defaultHideSourceItems || false;\n        },\n\n        /** render the footer, completion controls, and cancel controls */\n        _renderFooter: function(speed, callback) {\n            var self = this;\n            var $footer = this.$(\".footer\")\n                .empty()\n                .html(this.templates.footer());\n            _.each(this.footerSettings, function(property, selector) {\n                self.$(selector).prop(\"checked\", self[property]);\n            });\n            if (typeof this.oncancel === \"function\") {\n                this.$(\".cancel-create.btn\").show();\n            }\n            return $footer;\n        },\n\n        _creatorTemplates: {\n            main: _.template(\n                [\n                    '<div class=\"header flex-row no-flex\"></div>',\n                    '<div class=\"middle flex-row flex-row-container\"></div>',\n                    '<div class=\"footer flex-row no-flex\"></div>'\n                ].join(\"\")\n            )\n        }\n    };\n\n    //==============================================================================\n    return {\n        CollectionCreatorMixin: CollectionCreatorMixin\n    };\n});\n"]}