{"version":3,"sources":["mvc/grid/grid-shared.js"],"names":["define","GridView","View","Backbone","extend","initialize","options","$","this","self","Model","setElement","get","model","ajax","url","title","root","item","param","Galaxy","params","response","success","set","render","grid","attributes","$el","empty","append","_templateShared","$tmpl","length","_","each","shared_by_others","it","index","username","slug","display_url","escape","$table","toLowerCase"],"mappings":"aACAA,QAAQ,sBAAuB,SAASC,GAoEpC,OACIC,KAtERC,SAAAD,KAAAE,QACQC,WAAA,SAARC,GACQJ,IAAOC,EAAAA,KACPE,KAAAA,WAAYE,EAAA,WACRC,KAAIC,MAAO,IAAXN,SAAAO,MAAAJ,GACAE,KAAKG,KAAAA,KAAWJ,MAAEK,IAAlB,QACAJ,KAAKK,MAAQL,KAAIL,MAAAA,IAASO,UAC1BH,EAAAO,MACAC,IAAKC,OAAQC,KAAAT,KAAeU,KAAA,IAA5BV,KAAAK,MAAAD,IAAA,aAAA,IAAAL,EAAAY,MAAAC,OAAAC,QACEP,QAAK,SAAAQ,GACHP,EAAAA,aAAK,EACLQ,EAASV,MAAAW,IAAAF,GACLA,EAAAA,aAKXG,OAf2B,WAkBxB,IAAIC,EAAO,IAAIzB,EAASO,KAAKK,MAAMc,YADvCF,KAAQG,IAAAC,QAAAC,OAAWJ,EAAAE,KACfpB,KAAIkB,IAAAA,OAAWzB,KAAAA,oBAGlB8B,gBArB2B,WAwBxB,IAAItB,EAAOD,KADfuB,EAAAA,EAAiB,YAAAvB,KAAAK,MAAWD,IAAA,UAAA,yCACpBH,EAAOD,KAAXK,MAAAc,WACA,GAAIK,EAAQzB,kBAAED,EAAwBO,iBAAxBoB,OAA8C,EAAA,CACxD3B,IAAAA,EAAUC,EACVD,+IAAJ4B,EAAAC,KAiCO7B,EAAA8B,iBAAA,SAAAC,EAAAC,GACHN,IAAMF,EACTV,OAAAH,KACDR,EAAAS,KACH,0CAhELmB,EAAAE,SA0CoB,SAyBbF,EAAAG,KACGtC,EAAAA,OADV,oBAnBwBuC,EACA,KACAP,EAAEQ,OAAOL,EAAGrB,OACZ,gBAGAkB,EAAEQ,OAAOL,EAAGE,UACZ,gBAIZP,EAAMF,OAAOa,QAEbX,EAAMF,OAAO,MAAQtB,KAAKK,MAAMD,IAAI,UAAUgC,cAAgB,+BAElE,OAAOZ","file":"../../../scripts/mvc/grid/grid-shared.js","sourcesContent":["/** This class renders the grid list with shared section. */\ndefine([\"mvc/grid/grid-view\"], function(GridView) {\n    var View = Backbone.View.extend({\n        initialize: function(options) {\n            var self = this;\n            this.setElement($(\"<div/>\"));\n            this.model = new Backbone.Model(options);\n            this.item = this.model.get(\"item\");\n            this.title = this.model.get(\"plural\");\n            $.ajax({\n                url: Galaxy.root + this.item + \"/\" + this.model.get(\"action_id\") + \"?\" + $.param(Galaxy.params),\n                success: function(response) {\n                    response[\"dict_format\"] = true;\n                    self.model.set(response);\n                    self.render();\n                }\n            });\n        },\n\n        render: function() {\n            var grid = new GridView(this.model.attributes);\n            this.$el.empty().append(grid.$el);\n            this.$el.append(this._templateShared());\n        },\n\n        _templateShared: function() {\n            var self = this;\n            var $tmpl = $(\"<div>\" + \"<h2>\" + this.model.get(\"plural\") + \" shared with you by others</h2>\" + \"</div>\");\n            var options = this.model.attributes;\n            if (options.shared_by_others && options.shared_by_others.length > 0) {\n                var $table = $(\n                    '<table class=\"colored\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">' +\n                        '<tr class=\"header\">' +\n                        \"<th>Title</th>\" +\n                        \"<th>Owner</th>\" +\n                        \"</tr>\" +\n                        \"</table>\"\n                );\n                _.each(options.shared_by_others, function(it, index) {\n                    var display_url =\n                        Galaxy.root +\n                        self.item +\n                        \"/display_by_username_and_slug?username=\" +\n                        it.username +\n                        \"&slug=\" +\n                        it.slug;\n                    $table.append(\n                        \"<tr>\" +\n                            \"<td>\" +\n                            '<a href=\"' +\n                            display_url +\n                            '\">' +\n                            _.escape(it.title) +\n                            \"</a>\" +\n                            \"</td>\" +\n                            \"<td>\" +\n                            _.escape(it.username) +\n                            \"</td>\" +\n                            \"</tr>\"\n                    );\n                });\n                $tmpl.append($table);\n            } else {\n                $tmpl.append(\"No \" + this.model.get(\"plural\").toLowerCase() + \" have been shared with you.\");\n            }\n            return $tmpl;\n        }\n    });\n\n    return {\n        View: View\n    };\n});\n"]}