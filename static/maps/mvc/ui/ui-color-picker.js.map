{"version":3,"sources":["mvc/ui/ui-color-picker.js"],"names":["define","Utils","Backbone","View","extend","colors","standard","base","theme","initialize","$value","_build","visible","value","$boxes","self","options","this","$header","merge","$panel","$view","$","fadeIn","fadeOut","on","new_val","undefined","css","_getValue","onchange","toString","parseInt","empty","html","hex","_templateCheck","rgb","_content","match","line_def","x","slice","i","length","$content","_templateContent","$line","$box","append","find","_templateBox","top","bottom","_template","color"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-color-picker.js","sourcesContent":["/** Renders the color picker used e.g. in the tool form **/\ndefine([\"utils/utils\"], function(Utils) {\n    return Backbone.View.extend({\n        colors: {\n            standard: [\n                \"c00000\",\n                \"ff0000\",\n                \"ffc000\",\n                \"ffff00\",\n                \"92d050\",\n                \"00b050\",\n                \"00b0f0\",\n                \"0070c0\",\n                \"002060\",\n                \"7030a0\"\n            ],\n            base: [\"ffffff\", \"000000\", \"eeece1\", \"1f497d\", \"4f81bd\", \"c0504d\", \"9bbb59\", \"8064a2\", \"4bacc6\", \"f79646\"],\n            theme: [\n                [\"f2f2f2\", \"7f7f7f\", \"ddd9c3\", \"c6d9f0\", \"dbe5f1\", \"f2dcdb\", \"ebf1dd\", \"e5e0ec\", \"dbeef3\", \"fdeada\"],\n                [\"d8d8d8\", \"595959\", \"c4bd97\", \"8db3e2\", \"b8cce4\", \"e5b9b7\", \"d7e3bc\", \"ccc1d9\", \"b7dde8\", \"fbd5b5\"],\n                [\"bfbfbf\", \"3f3f3f\", \"938953\", \"548dd4\", \"95b3d7\", \"d99694\", \"c3d69b\", \"b2a2c7\", \"92cddc\", \"fac08f\"],\n                [\"a5a5a5\", \"262626\", \"494429\", \"17365d\", \"366092\", \"953734\", \"76923c\", \"5f497a\", \"31859b\", \"e36c09\"],\n                [\"7f7f7e\", \"0c0c0c\", \"1d1b10\", \"0f243e\", \"244061\", \"632423\", \"4f6128\", \"3f3151\", \"205867\", \"974806\"]\n            ]\n        },\n\n        initialize: function(options) {\n            this.options = Utils.merge(options, {});\n            this.setElement(this._template());\n            this.$panel = this.$(\".ui-color-picker-panel\");\n            this.$view = this.$(\".ui-color-picker-view\");\n            this.$value = this.$(\".ui-color-picker-value\");\n            this.$header = this.$(\".ui-color-picker-header\");\n            this._build();\n            this.visible = false;\n            this.value(this.options.value);\n            this.$boxes = this.$(\".ui-color-picker-box\");\n            var self = this;\n            this.$boxes.on(\"click\", function() {\n                self.value($(this).css(\"background-color\"));\n                self.$header.trigger(\"click\");\n            });\n            this.$header.on(\"click\", function() {\n                self.visible = !self.visible;\n                if (self.visible) {\n                    self.$view.fadeIn(\"fast\");\n                } else {\n                    self.$view.fadeOut(\"fast\");\n                }\n            });\n        },\n\n        /** Get/set value */\n        value: function(new_val) {\n            if (new_val !== undefined && new_val !== null) {\n                this.$value.css(\"background-color\", new_val);\n                this.$(\".ui-color-picker-box\").empty();\n                this.$(this._getValue()).html(this._templateCheck());\n                this.options.onchange && this.options.onchange(new_val);\n            }\n            return this._getValue();\n        },\n\n        /** Get value from dom */\n        _getValue: function() {\n            var rgb = this.$value.css(\"background-color\");\n            rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n            if (rgb) {\n                function hex(x) {\n                    return (\"0\" + parseInt(x).toString(16)).slice(-2);\n                }\n                return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\n            } else {\n                return null;\n            }\n        },\n\n        /** Build color panel */\n        _build: function() {\n            this._content({ colors: this.colors.base });\n            for (var i in this.colors.theme) {\n                var line_def = {};\n                if (i == 0) {\n                    line_def[\"bottom\"] = true;\n                } else if (i != this.colors.theme.length - 1) {\n                    line_def[\"top\"] = true;\n                    line_def[\"bottom\"] = true;\n                } else {\n                    line_def[\"top\"] = true;\n                }\n                line_def[\"colors\"] = this.colors.theme[i];\n                this._content(line_def);\n            }\n            this._content({ colors: this.colors.standard });\n        },\n\n        /** Create content */\n        _content: function(options) {\n            var colors = options.colors;\n            var $content = $(this._templateContent());\n            var $line = $content.find(\".line\");\n            this.$panel.append($content);\n            for (var i in colors) {\n                var $box = $(this._templateBox(colors[i]));\n                if (options.top) {\n                    $box.css(\"border-top\", \"none\");\n                    $box.css(\"border-top-left-radius\", \"0px\");\n                    $box.css(\"border-top-right-radius\", \"0px\");\n                }\n                if (options.bottom) {\n                    $box.css(\"border-bottom\", \"none\");\n                    $box.css(\"border-bottom-left-radius\", \"0px\");\n                    $box.css(\"border-bottom-right-radius\", \"0px\");\n                }\n                $line.append($box);\n            }\n            return $content;\n        },\n\n        /** Check icon */\n        _templateCheck: function() {\n            return '<div class=\"ui-color-picker-check fa fa-check\"/>';\n        },\n\n        /** Content template */\n        _templateContent: function() {\n            return '<div class=\"ui-color-picker-content\">' + '<div class=\"line\"/>' + \"</div>\";\n        },\n\n        /** Box template */\n        _templateBox: function(color) {\n            return '<div id=\"' + color + '\" class=\"ui-color-picker-box\" style=\"background-color: #' + color + ';\"/>';\n        },\n\n        /** Main template */\n        _template: function() {\n            return (\n                '<div class=\"ui-color-picker\">' +\n                '<div class=\"ui-color-picker-header\">' +\n                '<div class=\"ui-color-picker-value\"/>' +\n                '<div class=\"ui-color-picker-label\">Select a color</div>' +\n                \"</div>\" +\n                '<div class=\"ui-color-picker-view ui-input\">' +\n                '<div class=\"ui-color-picker-panel\"/>' +\n                \"</div>\"\n            );\n            (\"</div>\");\n        }\n    });\n});\n"]}