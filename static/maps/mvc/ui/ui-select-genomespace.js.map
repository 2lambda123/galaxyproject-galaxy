{"version":3,"sources":["mvc/ui/ui-select-genomespace.js"],"names":["define","Utils","Ui","GenomespaceBrowser","View","Backbone","extend","initialize","this","browse_button","ButtonIcon","title","icon","tooltip","browseGenomeSpace","filename_textbox","Input","token_textbox","type","setElement","_template","options","$","append","$el","self","openFileBrowser","data","token","value","new_value","_getValue","_setValue","values","split"],"mappings":"aACAA,QAAQ,cAAe,iBAAkB,6BAA8B,SAASC,EAAOC,EAAIC,GAsFvF,OACIC,KAnFOC,SAASD,KAAKE,QAArBF,WAAOC,SAAcC,GAErBC,IAAAA,EAAYC,KAKRA,KAAKC,cAAgB,IAAIP,EAAGQ,YAD5BC,MAAA,SACAC,KAAKH,gBACDE,QAAO,qBACPC,QAAM,WACNC,EAASC,uBAObN,KAAKO,iBAAmB,IAAIb,EAAGc,MAG/BR,KAAKS,cAAgB,IAAIf,EAAGc,OAD5BE,KAAA,aAMAV,KAAKW,WAAWX,KAAKY,UAAUC,IAD/Bb,KAAAc,EAAA,wBAAAC,OAAAf,KAAAC,cAAAe,KACAhB,KAAKW,EAAAA,2BAA0BE,OAA/Bb,KAAAO,iBAAAS,KACAhB,KAAKc,EAAE,wBAAwBC,OAAOf,KAAKC,cAAce,MAM7DV,kBAAmB,SAASO,GAD5B,IAAAI,EAAAjB,KACAM,EAAmBY,iBACXD,gBAAJ,SAAAE,GACAxB,EAAAA,MAAmBuB,EAAAA,YAAgB,IAAAC,EAAAC,WAQvCR,UAAW,SAASC,GADpB,MACAD,6SAyBAS,MAAA,SAAAC,GAEI,QAAYf,IAAZe,EAGJ,OAAAtB,KAAAuB,YAxE4BvB,KAAAwB,UAAAF,IA6EpBC,UAAA,WACH,OAAAvB,KAAAO,iBAAAc,QAAA,IAAArB,KAAAS,cAAAY,SAITG,UAAO,SAAAF,GACG1B,IADV6B,OAAAH,EAAAI,MAAA,KAtFJ1B,KAAAO,iBAAAc,MAAAI,OAAA,IAiFgBzB,KAAKS,cAAcY,MAAMI,OAAO","file":"../../../scripts/mvc/ui/ui-select-genomespace.js","sourcesContent":["// dependencies\ndefine([\"utils/utils\", \"mvc/ui/ui-misc\", \"mvc/tool/tool-genomespace\"], function(Utils, Ui, GenomespaceBrowser) {\n    /**\n * GenomeSpace file selector\n */\n    var View = Backbone.View.extend({\n        // initialize\n        initialize: function(options) {\n            // link this\n            var self = this;\n\n            // create insert new list element button\n            this.browse_button = new Ui.ButtonIcon({\n                title: \"Browse\",\n                icon: \"fa fa-sign-in\",\n                tooltip: \"Browse GenomeSpace\",\n                onclick: function() {\n                    self.browseGenomeSpace();\n                }\n            });\n\n            // create genomespace filepath textbox\n            this.filename_textbox = new Ui.Input();\n\n            // create genomespace token textbox\n            this.token_textbox = new Ui.Input({\n                type: \"password\"\n            });\n\n            // create elements\n            this.setElement(this._template(options));\n            this.$(\".ui-gs-browse-button\").append(this.browse_button.$el);\n            this.$(\".ui-gs-filename-textbox\").append(this.filename_textbox.$el);\n            this.$(\".ui-gs-token-textbox\").append(this.token_textbox.$el);\n        },\n\n        /** Browse GenomeSpace */\n        browseGenomeSpace: function(options) {\n            var self = this;\n            GenomespaceBrowser.openFileBrowser({\n                successCallback: function(data) {\n                    self.value(data.destination + \"^\" + data.token);\n                }\n            });\n        },\n\n        /** Main Template */\n        _template: function(options) {\n            return (\n                '<div class=\"ui-gs-select-file\">' +\n                '<div class=\"ui-gs-browse-field\">' +\n                '<span class=\"ui-gs-browse-button\" />' +\n                '<span class=\"ui-gs-filename-textbox\" />' +\n                \"</div>\" +\n                '<div class=\"ui-gs-token-field\">' +\n                '<span class=ui-gs-label\"><div class=\"ui-gs-token-label\">Token</div></span>' +\n                '<span class=\"ui-gs-token-textbox\" />' +\n                \"</div>\" +\n                \"</div>\"\n            );\n        },\n\n        /** Return/Set currently selected genomespace filename/token */\n        value: function(new_value) {\n            // check if new_value is defined\n            if (new_value !== undefined) {\n                this._setValue(new_value);\n            } else {\n                return this._getValue();\n            }\n        },\n\n        // get value\n        _getValue: function() {\n            return this.filename_textbox.value() + \"^\" + this.token_textbox.value();\n        },\n\n        // set value\n        _setValue: function(new_value) {\n            if (new_value) {\n                values = new_value.split(\"^\");\n                this.filename_textbox.value(values[0]);\n                this.token_textbox.value(values[1]);\n            }\n        }\n    });\n\n    return {\n        View: View\n    };\n});\n"]}