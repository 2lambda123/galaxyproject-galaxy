{"version":3,"sources":["mvc/ui/ui-tabs.js"],"names":["define","Utils","View","Backbone","extend","initialize","options","this","self","collection","model","onchange","visible","setElement","$","_template","$nav","$content","$el","on","hide","render","listenTo","_add","_remove","_change","_reset","id","get","length","first","children","removeClass","addClass","size","current","show","set","add","del","remove","delAll","reset","showTab","hideTab","tab_model","attributes","append","title","tooltip","placement","container","e","preventDefault","empty","_template_tab","$tmpl","attr","$href","find","icon"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-tabs.js","sourcesContent":["/**\n *  Renders tabs e.g. used in the charts editor, behaves similar to repeat and section rendering\n */\ndefine([\"utils/utils\"], function(Utils) {\n    var View = Backbone.View.extend({\n        initialize: function(options) {\n            var self = this;\n            this.collection = new Backbone.Collection();\n            this.model =\n                (options && options.model) ||\n                new Backbone.Model({\n                    onchange: null,\n                    visible: true\n                }).set(options);\n            this.setElement($(this._template()));\n            this.$nav = this.$(\".tab-navigation\");\n            this.$content = this.$(\".tab-content\");\n            this.$el.on(\"click\", function() {\n                $(\".tooltip\").hide();\n            });\n            this.render();\n            this.listenTo(this.model, \"change\", this.render, this);\n            this.listenTo(this.collection, \"add\", this._add, this);\n            this.listenTo(this.collection, \"remove\", this._remove, this);\n            this.listenTo(this.collection, \"change\", this._change, this);\n            this.listenTo(this.collection, \"reset\", this._reset, this);\n            this.listenTo(this.collection, \"add remove reset\", this.render, this);\n        },\n\n        render: function() {\n            var id = this.model.get(\"current\");\n            id = this.$(\"#\" + id).length > 0 ? id : this.first();\n            if (id) {\n                this.$nav.children().removeClass(\"active\");\n                this.$content.children().removeClass(\"active\");\n                this.$(\"#tab-\" + id).addClass(\"active\");\n                this.$(\"#\" + id).addClass(\"active\");\n            }\n            this.$el[this.model.get(\"visible\") ? \"fadeIn\" : \"fadeOut\"](\"fast\");\n            this.$nav[this.size() > 1 ? \"show\" : \"hide\"]();\n        },\n\n        /** Returns tab id for currently shown tab */\n        current: function() {\n            return this.model.get(\"current\");\n        },\n\n        /** Show tab view and highlight a tab by id */\n        show: function(id) {\n            if (id) {\n                this.model.set({ current: id, visible: true });\n                this.model.get(\"onchange\") && this.model.get(\"onchange\")(id);\n            }\n        },\n\n        /** Hide tab view */\n        hide: function() {\n            this.model.set(\"visible\", false);\n        },\n\n        /** Returns first tab */\n        first: function() {\n            var model = this.collection.first();\n            return model && model.id;\n        },\n\n        /** Returns current number of tabs */\n        size: function() {\n            return this.collection.length;\n        },\n\n        /** Adds a new tab */\n        add: function(options) {\n            this.collection.add(options);\n        },\n\n        /** Delete tab */\n        del: function(id) {\n            this.collection.remove(id);\n        },\n\n        /** Delete all tabs */\n        delAll: function() {\n            this.collection.reset();\n        },\n\n        /** Show tab */\n        showTab: function(id) {\n            this.collection.get(id).set(\"hidden\", false);\n        },\n\n        /** Hide tab */\n        hideTab: function(id) {\n            this.collection.get(id).set(\"hidden\", true);\n        },\n\n        /** Adds a new tab */\n        _add: function(tab_model) {\n            var self = this;\n            var options = tab_model.attributes;\n            this.$content.append(\n                $(\"<div/>\")\n                    .attr(\"id\", options.id)\n                    .addClass(\"tab-pane\")\n                    .append(options.$el)\n            );\n            this.$nav.append(\n                $(this._template_tab(options))\n                    .show()\n                    .tooltip({\n                        title: options.tooltip,\n                        placement: \"bottom\",\n                        container: self.$el\n                    })\n                    .on(\"click\", function(e) {\n                        e.preventDefault();\n                        self.show(options.id);\n                    })\n            );\n            if (this.size() == 1) {\n                this.show(options.id);\n            }\n        },\n\n        /** Delete tab */\n        _remove: function(tab_model) {\n            this.$(\"#tab-\" + tab_model.id).remove();\n            this.$(\"#\" + tab_model.id).remove();\n        },\n\n        /** Reset collection */\n        _reset: function() {\n            this.$nav.empty();\n            this.$content.empty();\n        },\n\n        /** Change tab */\n        _change: function(tab_model) {\n            this.$(\"#tab-\" + tab_model.id)[tab_model.get(\"hidden\") ? \"hide\" : \"show\"]();\n        },\n\n        /** Main template */\n        _template: function() {\n            return $(\"<div/>\")\n                .addClass(\"ui-tabs tabbable tabs-left\")\n                .append($(\"<ul/>\").addClass(\"tab-navigation nav nav-tabs\"))\n                .append($(\"<div/>\").addClass(\"tab-content\"));\n        },\n\n        /** Tab template */\n        _template_tab: function(options) {\n            var $tmpl = $(\"<li/>\")\n                .addClass(\"tab-element\")\n                .attr(\"id\", \"tab-\" + options.id)\n                .append($(\"<a/>\").attr(\"id\", \"tab-title-link-\" + options.id));\n            var $href = $tmpl.find(\"a\");\n            options.icon &&\n                $href.append(\n                    $(\"<i/>\")\n                        .addClass(\"tab-icon fa\")\n                        .addClass(options.icon)\n                );\n            $href.append(\n                $(\"<span/>\")\n                    .attr(\"id\", \"tab-title-text-\" + options.id)\n                    .addClass(\"tab-title-text\")\n                    .append(options.title)\n            );\n            return $tmpl;\n        }\n    });\n\n    return { View: View };\n});\n"]}