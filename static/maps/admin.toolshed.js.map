{"version":3,"sources":["admin.toolshed.js"],"names":["define","AdminToolshedRouter","initialize","Backbone","mod_shed_list_view","mod_categories_view","routes","mod_repository_view","sheds","queue","workflows","status","Router","extend","this","routesHit","history","on","bind","trackPageview","window","","navigate","status/r/:repositories","GalaxyAdminToolshedApp","View","app_config","known_views","Galaxy","admintoolshedapp","trigger","replace","GalaxyApp","adminShedListView","tool_shed","admin_toolshed_router","adminShedCategoriesView","adminRepoQueueView","reDraw","mod_repoqueue_view","RepoQueueView","adminShedCategoryView","category_id","ShedListView","adminRepositoryView","CategoryView","repository_id","adminRepoStatusView","mod_repositories_view","Category","repositories","RepoDetails","adminWorkflowsView","split","mod_repo_status_view","RepoStatus","mod_workflows_view","Workflows","start","pushState"],"mappings":"aAAAA,QAEQ,8BAiBIC,+BACAC,iCACI,+BACA,qCACAC,gCAGQ,+BAIR,SACHC,EAnBLC,EAqBIC,EACIC,EACAC,EACAC,EACAC,GAEAC,IAAAA,EANIR,SAAAS,OAAAC,QAOJX,WAAA,WACAY,KAAAC,UAAA,EAtByCZ,SAAAa,QAAAC,GAKrC,QAqBR,WAnBYH,KAAKC,aAETD,MAEJA,KAAKI,KAAK,QAASJ,KAAKK,gBAuBpBC,QADJC,GAEO,YACHb,MAAKc,YACRb,MAAA,QACJC,UAAA,YAtCLa,yBAAA,SAoBQZ,OAAQ,SAqBZa,0BAAkCC,aAClCC,sCAAY,eACRC,2CAA8C,cAStCC,KAAAA,WADJd,KAEOC,UAAA,EACHa,OAAOC,QAAAA,OAJff,KAAAQ,SAAA,KAAAQ,SAAA,EAAAC,SAAA,OA0ER,OACIC,UAhEmBH,SAAiBI,KAAAA,QAC3BP,YALLC,aAAA,YAAA,QAAA,SAAA,aAAA,eAAA,gBASQC,WAAAA,WACIM,OAAAA,iBAAWA,KADwCpB,KAAvDqB,sBAAA,IAAAlC,EAIA2B,KAAAA,sBAAAX,GAAwBmB,cAAAA,WACpBF,OAAAA,iBAAqBH,mBADzBH,OAAAC,iBAAAQ,mBAAAC,SANRV,OAAAC,iBAAAQ,mBAAA,IAAAE,EAAAC,gBAaQZ,KAAAA,sBAAAX,GAAwBwB,kBAAxB,WACIP,OAAAA,iBAAqBH,kBACrBW,OAAAA,iBAAaA,kBAAAA,SAEdd,OAAAC,iBAAAI,kBAAA,IAAA7B,EAAAuC,eAGCD,KAAAA,sBAAaA,GAAAA,mBAAAA,SAAAA,GAFjBd,OAAAC,iBAAAO,wBAIHR,OAAAC,iBAAAO,wBAAAE,QAXLJ,UAAAA,EAAAH,QAAA,MAAA,SAeQH,OAAOC,iBAAiBe,wBAA2B,IAAAvC,EAAAwC,cAC/CX,UAAWA,EAAUH,QAAQ,MAAO,WAIxCH,KAAAA,sBAAAX,GAAwB2B,qBAAsB,SAAIrC,EAAAA,GAC9C2B,OAAAA,iBAAqBH,sBACrBe,OAAAA,iBAAeA,sBAAAA,QAFnBZ,UAAAA,EAAAH,QAAA,MAAA,OAIHW,YAAAA,IAGGd,OAAOC,iBAAiBkB,sBAAqB,IAAAC,EAAAC,UACtCpB,UAAAA,EAAiBkB,QAAAA,MAAoBT,OACxCY,YAAcA,MAIdA,KAAAA,sBAAcA,GAAAA,mBAAA,SAAAhB,EAAAY,GADlBlB,OAAAC,iBAAAe,oBAGHhB,OAAAC,iBAAAe,oBAAAN,QATLJ,UAAAA,EAAAH,QAAA,MAAA,OAWKI,cAAyBW,IAGnBlB,OAAAC,iBAAAe,oBAAA,IAAArC,EAAA4C,aACItB,UAAAA,EAAiBuB,QAAAA,MAAxB,OACHN,cAAAA,MAIRhC,KAAAqB,sBAAAlB,GAAA,eAAA,SAAAiC,GAhFLtB,OAAAC,iBAAAkB,oBA8DgBnB,OAAOC,iBAAiBkB,oBAAoBT,QAqBrDY,aAAAA,EAAAG,MAAA,OA/IfzB,OAAAC,iBAAAkB,oBAAA,IAAAO,EAAAC,YA+H4BL,aAAcA,EAAaG,MAAM,SAI7CvC,KAAKqB,sBAAsBlB,GAAG,kBAAmB,WACzCW,OAAOC,iBAAiBuB,mBACxBxB,OAAOC,iBAAiBuB,mBAAmBd,SAE3CV,OAAOC,iBAAiBuB,mBAAqB,IAAII,EAAmBC,YAI5EtD,SAASa,QAAQ0C,OAAQC,WAAW","file":"../scripts/admin.toolshed.js","sourcesContent":["define(\n    [\n        \"mvc/toolshed/shed-list-view\",\n        \"mvc/toolshed/categories-view\",\n        \"mvc/toolshed/repositories-view\",\n        \"mvc/toolshed/repository-view\",\n        \"mvc/toolshed/repository-queue-view\",\n        \"mvc/toolshed/repo-status-view\",\n        \"mvc/toolshed/workflows-view\"\n    ],\n    function(\n        mod_shed_list_view,\n        mod_categories_view,\n        mod_repositories_view,\n        mod_repository_view,\n        mod_repoqueue_view,\n        mod_repo_status_view,\n        mod_workflows_view\n    ) {\n        var AdminToolshedRouter = Backbone.Router.extend({\n            initialize: function() {\n                this.routesHit = 0;\n                // keep count of number of routes handled by the application\n                Backbone.history.on(\n                    \"route\",\n                    function() {\n                        this.routesHit++;\n                    },\n                    this\n                );\n                this.bind(\"route\", this.trackPageview);\n            },\n\n            routes: {\n                \"\": \"toolsheds\",\n                sheds: \"toolsheds\",\n                queue: \"queue\",\n                workflows: \"workflows\",\n                \"status/r/:repositories\": \"status\",\n                status: \"status\",\n                \"categories/s/:tool_shed\": \"categories\",\n                \"category/s/:tool_shed/c/:cateory_id\": \"repositories\",\n                \"repository/s/:tool_shed/r/:repository_id\": \"repository\"\n            },\n\n            /**\n        * If more than one route has been hit the user did not land on current\n        * page directly so we can go back safely. Otherwise go to the home page.\n        * Use replaceState if available so the navigation doesn't create an\n        * extra history entry\n        */\n            back: function() {\n                if (this.routesHit > 1) {\n                    window.history.back();\n                } else {\n                    this.navigate(\"#\", { trigger: true, replace: true });\n                }\n            }\n        });\n\n        var GalaxyAdminToolshedApp = Backbone.View.extend({\n            app_config: {\n                known_views: [\"toolsheds\", \"queue\", \"status\", \"categories\", \"repositories\", \"repoository\"]\n            },\n\n            initialize: function() {\n                Galaxy.admintoolshedapp = this;\n                this.admin_toolshed_router = new AdminToolshedRouter();\n\n                this.admin_toolshed_router.on(\"route:queue\", function() {\n                    if (Galaxy.admintoolshedapp.adminRepoQueueView) {\n                        Galaxy.admintoolshedapp.adminRepoQueueView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepoQueueView = new mod_repoqueue_view.RepoQueueView();\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:toolsheds\", function() {\n                    if (Galaxy.admintoolshedapp.adminShedListView) {\n                        Galaxy.admintoolshedapp.adminShedListView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedListView = new mod_shed_list_view.ShedListView();\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:categories\", function(tool_shed) {\n                    if (Galaxy.admintoolshedapp.adminShedCategoriesView) {\n                        Galaxy.admintoolshedapp.adminShedCategoriesView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\")\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedCategoriesView = new mod_categories_view.CategoryView({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\")\n                        });\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:repositories\", function(tool_shed, category_id) {\n                    if (Galaxy.admintoolshedapp.adminShedCategoryView) {\n                        Galaxy.admintoolshedapp.adminShedCategoryView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            category_id: category_id\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedCategoryView = new mod_repositories_view.Category({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            category_id: category_id\n                        });\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:repository\", function(tool_shed, repository_id) {\n                    if (Galaxy.admintoolshedapp.adminRepositoryView) {\n                        Galaxy.admintoolshedapp.adminRepositoryView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            repository_id: repository_id\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepositoryView = new mod_repository_view.RepoDetails({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            repository_id: repository_id\n                        });\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:status\", function(repositories) {\n                    if (Galaxy.admintoolshedapp.adminRepoStatusView) {\n                        Galaxy.admintoolshedapp.adminRepoStatusView.reDraw({\n                            repositories: repositories.split(\"|\")\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepoStatusView = new mod_repo_status_view.RepoStatus({\n                            repositories: repositories.split(\"|\")\n                        });\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:workflows\", function() {\n                    if (Galaxy.admintoolshedapp.adminWorkflowsView) {\n                        Galaxy.admintoolshedapp.adminWorkflowsView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminWorkflowsView = new mod_workflows_view.Workflows();\n                    }\n                });\n\n                Backbone.history.start({ pushState: false });\n            }\n        });\n\n        return {\n            GalaxyApp: GalaxyAdminToolshedApp\n        };\n    }\n);\n"]}