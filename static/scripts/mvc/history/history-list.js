define("mvc/history/history-list",["exports","utils/localization","utils/utils","mvc/grid/grid-view","mvc/history/history-model","mvc/history/copy-dialog"],function(t,e,i,o,n,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});var l=r(e),d=r(i),s=r(o),c=r(n),u=r(a),f=Backbone.View.extend({title:(0,l.default)("Histories"),initialize:function(t){var e=this;this.setElement($("<div/>")),this.model=new Backbone.Model,d.default.get({url:Galaxy.root+"history/"+t.action_id+"?"+$.param(Galaxy.params),success:function(t){t.dict_format=!0,_.each(t.operations,function(t){"Copy"==t.label&&(t.onclick=function(t){e._showCopyDialog(t)})}),e.model.set(t),e.render()}})},render:function(){var t=new s.default(this.model.attributes);this.$el.empty().append(t.$el)},_showCopyDialog:function(t){var e=new c.default.History({id:t});e.fetch().fail(function(){alert("History could not be fetched. Please contact an administrator")}).done(function(){(0,u.default)(e,{}).done(function(){window.parent&&window.parent.Galaxy&&window.parent.Galaxy.currHistoryPanel&&window.parent.Galaxy.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)})})}});t.default={View:f}});