webpackJsonp([4],{0:function(t,e,i){(function(t){"use strict";var e=i(1),o=e,n=i(31).GalaxyApp,s=i(10),a=i(5),r=i(34);window.app=function(i,l){window.Galaxy=new n(i,l),Galaxy.debug("login app");var d=encodeURI(i.redirect);if(!i.show_welcome_with_login){var h=e.param({use_panels:"True",redirect:d});return void(window.location.href=Galaxy.root+"user/login?"+h)}var c=new r.PageLayoutView(t.extend(i,{el:"body",center:new s.CenterPanel({el:"#center"}),right:new s.RightPanel({title:a("Login required"),el:"#right"})}));o(function(){var t=e.param({redirect:d}),o=Galaxy.root+"user/login?"+t;c.render(),c.center.$("#galaxy_main").prop("src",i.welcome_url),c.right.$(".unified-panel-body").css("overflow","hidden").html('<iframe src="'+o+'" frameborder="0" style="width: 100%; height: 100%;"/>')})}}).call(e,i(2))},4:function(t,e,i){var o,n;(function(i,s,a){"use strict";o=[],n=function(){function t(t){return'<iframe src="'+t+'" frameborder="0" style="width: 100%; height: 100%;"/>'}function e(t,o){for(var n in t){var s=t[n];if(i.isObject(s)){var a=o(s);a&&(t[n]=a),e(s,o)}}}function o(t){return/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function n(t){return s("<div/>").text(t).html()}function r(t){if(t instanceof Array||(t=[t]),0===t.length)return!0;for(var e in t)if(["__null__","__undefined__",null,void 0].indexOf(t[e])>-1)return!0;return!1}function l(t){if(s.isArray(t)){var t=t.toString().replace(/,/g,", "),e=t.lastIndexOf(", ");return e!=-1&&(t=t.substr(0,e)+" or "+t.substr(e+2)),t}return""}function d(t){top.__utils__get__=top.__utils__get__||{};var e=JSON.stringify(t);t.cache&&top.__utils__get__[e]?(t.success&&t.success(top.__utils__get__[e]),window.console.debug("utils.js::get() - Fetching from cache ["+t.url+"].")):h({url:t.url,data:t.data,success:function(i){top.__utils__get__[e]=i,t.success&&t.success(i)},error:function(e){t.error&&t.error(e)}})}function h(t){var e={contentType:"application/json",type:t.type||"GET",data:t.data||{},url:t.url};"GET"==e.type||"DELETE"==e.type?(s.isEmptyObject(e.data)||(e.url+=e.url.indexOf("?")==-1?"?":"&",e.url+=s.param(e.data,!0)),e.data=null):(e.dataType="json",e.url=e.url,e.data=JSON.stringify(e.data)),s.ajax(e).done(function(e){if("string"==typeof e)try{e=e.replace("Infinity,",'"Infinity",'),e=a.parseJSON(e)}catch(i){console.debug(i)}t.success&&t.success(e)}).fail(function(e){var i=null;try{i=a.parseJSON(e.responseText)}catch(o){i=e.responseText}t.error&&t.error(i,e)}).always(function(){t.complete&&t.complete()})}function c(t,e){var i=s('<div class="'+t+'"></div>');i.appendTo(":eq(0)");var o=i.css(e);return i.remove(),o}function u(t){s('link[href^="'+t+'"]').length||s('<link href="'+Galaxy.root+t+'" rel="stylesheet">').appendTo("head")}function p(t,e){return t?i.defaults(t,e):e}function f(t,e){for(var i=1,o=0;o<e;o++)i*=10;return Math.round(t*i)/i}function g(t,e,i){i=void 0!==i?i:1;var o="";if(t>=w)t/=w,o="TB";else if(t>=b)t/=b,o="GB";else if(t>=y)t/=y,o="MB";else if(t>=v)t/=v,o="KB";else{if(!(t>0))return e?"0 b":"<strong>-</strong>";o="b"}var n="b"==o?t:f(t,i);return e?n+" "+o:"<strong>"+n+"</strong> "+o}function m(){return top.__utils__uid__=top.__utils__uid__||0,"uid-"+top.__utils__uid__++}function _(){var t=new Date,e=(t.getHours()<10?"0":"")+t.getHours(),i=(t.getMinutes()<10?"0":"")+t.getMinutes();return datetime=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+", "+e+":"+i}var v=1024,y=v*v,b=y*v,w=b*v;return{cssLoadFile:u,cssGetAttribute:c,get:d,merge:p,iframe:t,bytesToString:g,uid:m,time:_,request:h,sanitize:n,textify:l,isEmpty:r,deepeach:e,isJSON:o}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(2),i(1),i(1))},8:function(t,e,i){var o,n;(function(i,s,a){"use strict";o=[],n=function(){var t=i.View.extend({optionsDefault:{container:"body",title:"ui-modal",cls:"ui-modal",body:"",backdrop:!0,height:null,width:null,closing_events:!1,closing_callback:null,title_separator:!0},buttonList:{},initialize:function(t){this.setElement(this._template()),this.options=s.defaults(t||{},this.optionsDefault),a(this.options.container).prepend(this.el),this.$header=this.$(".modal-header"),this.$dialog=this.$(".modal-dialog"),this.$body=this.$(".modal-body"),this.$footer=this.$(".modal-footer"),this.$backdrop=this.$(".modal-backdrop"),this.$buttons=this.$(".buttons"),t&&this.render()},show:function(t){if(t&&(this.options=s.defaults(t,this.optionsDefault),this.render()),!this.visible&&(this.visible=!0,this.$el.fadeIn("fast"),this.options.closing_events)){var e=this;a(document).on("keyup.ui-modal",function(t){27==t.keyCode&&e.hide(!0)}),this.$backdrop.on("click",function(){e.hide(!0)})}},hide:function(t){this.visible=!1,this.$el.fadeOut("fast"),this.options.closing_callback&&this.options.closing_callback(t),a(document).off("keyup.ui-modal"),this.$backdrop.off("click")},render:function(){var t=this;if("progress"==this.options.body&&(this.options.body=a('<div class="progress progress-striped active"><div class="progress-bar progress-bar-info" style="width:100%"/></div>')),this.$el.removeClass().addClass("modal").addClass(this.options.cls),this.$header.find(".title").html(this.options.title),this.$body.html(this.options.body),this.$buttons.empty(),this.buttonList={},this.options.buttons){var e=0;a.each(this.options.buttons,function(i,o){var n=a("<button/>").attr("id","button-"+e++).text(i).click(o);t.$buttons.append(n).append("&nbsp;"),t.buttonList[i]=n})}else this.$footer.hide();this.$backdrop[this.options.backdrop&&"addClass"||"removeClass"]("in"),this.$header[!this.options.title_separator&&"addClass"||"removeClass"]("no-separator"),this.options.height?(this.$body.css("height",this.options.height),this.$body.css("overflow","hidden")):this.$body.css("max-height",a(window).height()/2),this.options.width&&this.$dialog.css("width",this.options.width)},getButton:function(t){return this.buttonList[t]},enableButton:function(t){this.getButton(t).prop("disabled",!1)},disableButton:function(t){this.getButton(t).prop("disabled",!0)},showButton:function(t){this.getButton(t).show()},hideButton:function(t){this.getButton(t).hide()},scrollTop:function(){return this.$body.scrollTop()},_template:function(){return'<div class="ui-modal"><div class="modal-backdrop fade"/><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="title"/></div><div class="modal-body"/><div class="modal-footer"><div class="buttons"/></div></div></div></div>'}});return{View:t}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(2),i(1))},16:function(t,e,i){var o,n;(function(i,s,a){"use strict";o=[],n=function(){var t=i.View.extend({initialize:function(t){this.model=t&&t.model||new i.Model(t),this.setElement(s("<div/>").addClass("corner frame")),this.$el.append(s("<div/>").addClass("f-header corner").append(s("<div/>").addClass("f-title")).append(s("<div/>").addClass("f-icon f-close fa fa-close").tooltip({title:"Close",placement:"bottom"}))).append(s("<div/>").addClass("f-content")).append(s("<div/>").addClass("f-resize f-icon corner fa fa-expand").tooltip({title:"Resize"})).append(s("<div/>").addClass("f-cover")),this.$header=this.$(".f-header"),this.$title=this.$(".f-title"),this.$content=this.$(".f-content"),this.render(),this.listenTo(this.model,"change",this.render,this)},render:function(){var t=this,e=this.model.attributes;this.$title.html(e.title||""),this.$header.find(".f-icon-left").remove(),a.each(e.menu,function(e){var i=s("<div/>").addClass("f-icon-left").addClass(e.icon);a.isFunction(e.disabled)&&e.disabled()?i.attr("disabled",!0):i.on("click",function(){e.onclick(t)}).tooltip({title:e.tooltip,placement:"bottom"}),t.$header.append(i)}),e.url?this.$content.html(s("<iframe/>").addClass("f-iframe").attr("scrolling","auto").attr("src",e.url+(e.url.indexOf("?")===-1?"?":"&")+"widget=True")):e.content&&(a.isFunction(e.content)?e.content(t.$content):t.$content.html(e.content))}}),e=i.View.extend({defaultOptions:{frame:{cols:6,rows:3},rows:1e3,cell:130,margin:5,scroll:5,top_min:40,frame_max:9,visible:!0},cols:0,top:0,top_max:0,frame_z:0,frame_counter:0,frame_uid:0,frame_list:{},frame_shadow:null,visible:!1,event:{},initialize:function(t){var e=this;this.options=a.defaults(t||{},this.defaultOptions),this.visible=this.options.visible,this.top=this.top_max=this.options.top_min,this.setElement(s("<div/>").addClass("galaxy-frame").append(s("<div/>").addClass("frame-background")).append(s("<div/>").addClass("frame-menu frame-scroll-up fa fa-chevron-up fa-2x")).append(s("<div/>").addClass("frame-menu frame-scroll-down fa fa-chevron-down fa-2x"))),this.frame_shadow=new i.View({el:s("<div/>").addClass("corner frame-shadow")}),this.$el.append(this.frame_shadow.$el),this._frameInit(this.frame_shadow,"#frame-shadow"),this._frameResize(this.frame_shadow,{width:0,height:0}),this.frame_list["#frame-shadow"]=this.frame_shadow,this.visible?this.show():this.hide(),this._panelRefresh(),s(window).resize(function(){e.visible&&e._panelRefresh()})},render:function(){this.$(".frame-scroll-up")[this.top!=this.options.top_min&&"show"||"hide"](),this.$(".frame-scroll-down")[this.top!=this.top_max&&"show"||"hide"]()},add:function(e){if(this.frame_counter>=this.options.frame_max)Galaxy.modal.show({title:"Warning",body:"You have reached the maximum number of allowed frames ("+this.options.frame_max+").",buttons:{Close:function(){Galaxy.modal.hide()}}});else{var i="#frame-"+this.frame_uid++;if(0!==s(i).length)Galaxy.modal.show({title:"Error",body:"This frame already exists. This page might contain multiple frame managers.",buttons:{Close:function(){Galaxy.modal.hide()}}});else{this.top=this.options.top_min;var o=new t(e);this.$el.append(o.$el),e.width=this._toPixelCoord("width",this.options.frame.cols),e.height=this._toPixelCoord("height",this.options.frame.rows),this.frame_z=parseInt(o.$el.css("z-index")),this.frame_list[i]=o,this.frame_counter++,this._frameInit(o,i),this._frameResize(o,{width:e.width,height:e.height}),this._frameInsert(o,{top:0,left:0},!0),!this.visible&&this.show(),this.trigger("add")}}},del:function(t){var e=this,i=t.$el;i.fadeOut("fast",function(){i.remove(),delete e.frame_list[t.id],e.frame_counter--,e._panelRefresh(!0),e._panelAnimationComplete(),e.trigger("remove")})},show:function(){this.visible=!0,this.$el.fadeIn("fast"),this.trigger("show")},hide:function(){this.event.type||(this.visible=!1,this.$el.fadeOut("fast",function(){s(this).hide()}),this.trigger("hide"))},length:function(){return this.frame_counter},events:{mousemove:"_eventFrameMouseMove",mouseup:"_eventFrameMouseUp",mouseleave:"_eventFrameMouseUp",mousewheel:"_eventPanelScroll",DOMMouseScroll:"_eventPanelScroll","mousedown .frame":"_eventFrameMouseDown","mousedown .frame-background":"_eventHide","mousedown .frame-scroll-up":"_eventPanelScroll_up","mousedown .frame-scroll-down":"_eventPanelScroll_down","mousedown .f-close":"_eventFrameClose"},_eventFrameMouseDown:function(t){s(".tooltip").hide(),this.event.type||((s(t.target).hasClass("f-header")||s(t.target).hasClass("f-title"))&&(this.event.type="drag"),s(t.target).hasClass("f-resize")&&(this.event.type="resize"),this.event.type&&(t.preventDefault(),this.event.target=this._frameIdentify(t.target),this.event.xy={x:t.originalEvent.pageX,y:t.originalEvent.pageY},this._frameDragStart(this.event.target)))},_eventFrameMouseMove:function(t){if(this.event.type){var e={x:t.originalEvent.pageX,y:t.originalEvent.pageY},i={x:e.x-this.event.xy.x,y:e.y-this.event.xy.y};this.event.xy=e;var o=this._frameScreen(this.event.target);if("resize"==this.event.type){o.width+=i.x,o.height+=i.y;var n=this.options.cell-this.options.margin-1;o.width=Math.max(o.width,n),o.height=Math.max(o.height,n),this._frameResize(this.event.target,o),o.width=this._toGridCoord("width",o.width)+1,o.height=this._toGridCoord("height",o.height)+1,o.width=this._toPixelCoord("width",o.width),o.height=this._toPixelCoord("height",o.height),this._frameResize(this.frame_shadow,o),this._frameInsert(this.frame_shadow,{top:this._toGridCoord("top",o.top),left:this._toGridCoord("left",o.left)})}else if("drag"==this.event.type){o.left+=i.x,o.top+=i.y,this._frameOffset(this.event.target,o);var s={top:this._toGridCoord("top",o.top),left:this._toGridCoord("left",o.left)};0!==s.left&&s.left++,this._frameInsert(this.frame_shadow,s)}}},_eventFrameMouseUp:function(t){this.event.type&&(this._frameDragStop(this.event.target),this.event.type=null)},_eventFrameClose:function(t){this.event.type||(t.preventDefault(),this.del(this._frameIdentify(t.target)))},_eventHide:function(t){!this.event.type&&this.hide()},_eventPanelScroll:function(t){if(!this.event.type&&this.visible){var e=s(t.srcElement).parents(".frame");0!==e.length?t.stopPropagation():(t.preventDefault(),this._panelScroll(t.originalEvent.detail?t.originalEvent.detail:t.originalEvent.wheelDelta/-3))}},_eventPanelScroll_up:function(t){this.event.type||(t.preventDefault(),this._panelScroll(-this.options.scroll))},_eventPanelScroll_down:function(t){this.event.type||(t.preventDefault(),this._panelScroll(this.options.scroll))},_frameIdentify:function(t){return this.frame_list["#"+s(t).closest(".frame").attr("id")]},_frameDragStart:function(t){this._frameFocus(t,!0);var e=this._frameScreen(t);this._frameResize(this.frame_shadow,e),this._frameGrid(this.frame_shadow,t.grid_location),t.grid_location=null,this.frame_shadow.$el.show(),s(".f-cover").show()},_frameDragStop:function(t){this._frameFocus(t,!1);var e=this._frameScreen(this.frame_shadow);this._frameResize(t,e),this._frameGrid(t,this.frame_shadow.grid_location,!0),this.frame_shadow.grid_location=null,this.frame_shadow.$el.hide(),s(".f-cover").hide(),this._panelAnimationComplete()},_toGridCoord:function(t,e){var i="width"==t||"height"==t?1:-1;return"top"==t&&(e-=this.top),parseInt((e+i*this.options.margin)/this.options.cell,10)},_toPixelCoord:function(t,e){var i="width"==t||"height"==t?1:-1,o=e*this.options.cell-i*this.options.margin;return"top"==t&&(o+=this.top),o},_toGrid:function(t){return{top:this._toGridCoord("top",t.top),left:this._toGridCoord("left",t.left),width:this._toGridCoord("width",t.width),height:this._toGridCoord("height",t.height)}},_toPixel:function(t){return{top:this._toPixelCoord("top",t.top),left:this._toPixelCoord("left",t.left),width:this._toPixelCoord("width",t.width),height:this._toPixelCoord("height",t.height)}},_isCollision:function(t){function e(t,e){return!(t.left>e.left+e.width-1||t.left+t.width-1<e.left||t.top>e.top+e.height-1||t.top+t.height-1<e.top)}for(var i in this.frame_list){var o=this.frame_list[i];if(null!==o.grid_location&&e(t,o.grid_location))return!0}return!1},_locationRank:function(t){return t.top*this.cols+t.left},_panelRefresh:function(t){this.cols=parseInt(s(window).width()/this.options.cell,10)+1,this._frameInsert(null,null,t)},_panelAnimationComplete:function(){var t=this;s(".frame").promise().done(function(){t._panelScroll(0,!0)})},_panelScroll:function(t,e){var i=this.top-this.options.scroll*t;if(i=Math.max(i,this.top_max),i=Math.min(i,this.options.top_min),this.top!=i){for(var o in this.frame_list){var n=this.frame_list[o];if(null!==n.grid_location){var s={top:n.screen_location.top-(this.top-i),left:n.screen_location.left};this._frameOffset(n,s,e)}}this.top=i}this.render()},_frameInit:function(t,e){t.id=e,t.screen_location={},t.grid_location={},t.grid_rank=null,t.$el.attr("id",e.substring(1))},_frameInsert:function(t,e,i){var o=this,n=[];t&&(t.grid_location=null,n.push([t,this._locationRank(e)])),a.each(this.frame_list,function(t){null!==t.grid_location&&(t.grid_location=null,n.push([t,t.grid_rank]))}),n.sort(function(t,e){return t[1]<e[1]?-1:t[1]>e[1]?1:0}),a.each(n,function(t){o._framePlace(t[0],i)}),this.top_max=0,a.each(this.frame_list,function(t){null!==t.grid_location&&(o.top_max=Math.max(o.top_max,t.grid_location.top+t.grid_location.height))}),this.top_max=s(window).height()-this.top_max*this.options.cell-2*this.options.margin,this.top_max=Math.min(this.top_max,this.options.top_min),this.render()},_framePlace:function(t,e){t.grid_location=null;for(var i=this._toGrid(this._frameScreen(t)),o=!1,n=0;n<this.options.rows;n++){for(var s=0;s<Math.max(1,this.cols-i.width);s++)if(i.top=n,i.left=s,!this._isCollision(i)){o=!0;break}if(o)break}o?this._frameGrid(t,i,e):console.log("Grid dimensions exceeded.")},_frameFocus:function(t,e){t.$el.css("z-index",this.frame_z+(e?1:0))},_frameOffset:function(t,e,i){if(t.screen_location.left=e.left,t.screen_location.top=e.top,i){this._frameFocus(t,!0);var o=this;t.$el.animate({top:e.top,left:e.left},"fast",function(){o._frameFocus(t,!1)})}else t.$el.css({top:e.top,left:e.left})},_frameResize:function(t,e){t.$el.css({width:e.width,height:e.height}),t.screen_location.width=e.width,t.screen_location.height=e.height},_frameGrid:function(t,e,i){t.grid_location=e,this._frameOffset(t,this._toPixel(e),i),t.grid_rank=this._locationRank(e)},_frameScreen:function(t){var e=t.screen_location;return{top:e.top,left:e.left,width:e.width,height:e.height}}});return{View:e}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(1),i(2))},29:function(t,e,i){var o,n;o=[i(2),i(3),i(6),i(5)],n=function(t,e,i,o){"use strict";var n="user",s=e.Model.extend(i.LoggableMixin).extend({_logNamespace:n,urlRoot:function(){return Galaxy.root+"api/users"},defaults:{id:null,username:"("+o("anonymous user")+")",email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1},initialize:function(t){this.log("User.initialize:",t),this.on("loaded",function(t,e){this.log(this+" has loaded:",t,e)}),this.on("change",function(t,e){this.log(this+" has changed:",t,e.changes)})},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},loadFromApi:function(t,i){t=t||s.CURRENT_ID_STR,i=i||{};var o=this,n=i.success;return i.success=function(t,e){o.trigger("loaded",t,e),n&&n(t,e)},t===s.CURRENT_ID_STR&&(i.url=this.urlRoot+"/"+s.CURRENT_ID_STR),e.Model.prototype.fetch.call(this,i)},clearSessionStorage:function(){for(var t in sessionStorage)0===t.indexOf("history:")?sessionStorage.removeItem(t):"history-panel"===t&&sessionStorage.removeItem(t)},toString:function(){var t=[this.get("username")];return this.get("id")&&(t.unshift(this.get("id")),t.push(this.get("email"))),"User("+t.join(":")+")"}});s.CURRENT_ID_STR="current",s.getCurrentUserFromApi=function(t){var e=new s;return e.loadFromApi(s.CURRENT_ID_STR,t),e};e.Collection.extend(i.LoggableMixin).extend({model:s,urlRoot:function(){return Galaxy.root+"api/users"}});return{User:s}}.apply(e,o),!(void 0!==n&&(t.exports=n))},31:function(t,e,i){var o,n;(function(s){"use strict";o=[i(2),i(3),i(6),i(29),i(66),i(63),i(5)],n=function(t,e,i,o,n,a,r){function l(t,e){var i=this;return i._init(t||{},e||{})}a(l,"GalaxyApp");var d="galaxy:debug",h=d+":namespaces",c=!1;try{c="true"==localStorage.getItem(d)}catch(u){console.log(r("localStorage not available for debug flag retrieval"))}return l.prototype._init=function(i,o){var n=this;return t.extend(n,e.Events),c&&(n.logger=console,console.debug("debugging galaxy:","options:",i,"bootstrapped:",o)),n._processOptions(i),n.root=i.root||"/",n._initConfig(i.config||{}),n._patchGalaxy(window.Galaxy),n._initLogger(n.options.loggerOptions||{}),n.debug("GalaxyApp.options: ",n.options),n.debug("GalaxyApp.config: ",n.config),n.debug("GalaxyApp.logger: ",n.logger),n._initLocale(),n.debug("GalaxyApp.localize: ",n.localize),n.config=i.config||{},n.debug("GalaxyApp.config: ",n.config),n._initUser(i.user||{}),n.debug("GalaxyApp.user: ",n.user),n._setUpListeners(),n.trigger("ready",n),n},l.prototype.defaultOptions={patchExisting:!0,root:"/"},l.prototype._processOptions=function(t){var e=this,i=e.defaultOptions;e.options={};for(var o in i)i.hasOwnProperty(o)&&(e.options[o]=t.hasOwnProperty(o)?t[o]:i[o]);return e},l.prototype._initConfig=function(t){var e=this;return e.config=t,e.config.debug=c||e.config.debug,e},l.prototype._patchGalaxy=function(t){var e=this;if(e.options.patchExisting&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},l.prototype._initLogger=function(t){var e=this;if(e.config.debug){t.consoleLogger=t.consoleLogger||console,t.consoleLevel=t.consoleLevel||n.MetricsLogger.ALL;try{t.consoleNamespaceWhitelist=localStorage.getItem(h).split(",")}catch(o){}}return e.logger=new n.MetricsLogger(t),e.emit={},["log","debug","info","warn","error","metric"].map(function(t){e.emit[t]=function(i){e.logger.emit(t,arguments[0],Array.prototype.slice.call(arguments,1))}}),e.config.debug&&(i.LoggableMixin.logger=e.logger),e},l.prototype._initLocale=function(t){var e=this;return e.debug("_initLocale:",t),e.localize=r,window._l=e.localize,e},l.prototype._initUser=function(t){var e=this;return e.debug("_initUser:",t),e.user=new o.User(t),e.user.logger=e.logger,e},l.prototype._setUpListeners=function(){var t=this;return t.lastAjax={},s(document).bind("ajaxSend",function(e,i,o){var n=o.data;try{n=JSON.parse(n)}catch(s){}t.lastAjax={url:location.href.slice(0,-1)+o.url,data:n}}),t},l.prototype.debugging=function(t){var e=this;try{if(void 0===t)return"true"===localStorage.getItem(d);if(t)return localStorage.setItem(d,!0),!0;localStorage.removeItem(d),e.debuggingNamespaces(null)}catch(i){console.log(r("localStorage not available for debug flag retrieval"))}return!1},l.prototype.debuggingNamespaces=function(t){var e=this;try{if(void 0===t){var i=localStorage.getItem(h);return"string"==typeof i?i.split(","):[]}null===t?localStorage.removeItem(h):localStorage.setItem(h,t);var o=e.debuggingNamespaces();return e.logger&&(e.logger.options.consoleNamespaceWhitelist=o),o}catch(n){console.log(r("localStorage not available for debug namespace retrieval"))}},l.prototype.toString=function(){var t=this.user?this.user.get("email")||"(anonymous)":"uninitialized";return"GalaxyApp("+t+")"},{GalaxyApp:l}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(1))},32:function(t,e,i){var o,n;(function(s,a){"use strict";o=[i(4),i(33),i(35),i(62)],n=function(t,e,i,o){var n=s.View.extend({initialize:function(t){var n=this;this.options=t,this.setElement(this._template()),this.$navbarBrandLink=this.$(".navbar-brand-link"),this.$navbarBrandImage=this.$(".navbar-brand-image"),this.$navbarBrandTitle=this.$(".navbar-brand-title"),this.$navbarTabs=this.$(".navbar-tabs"),this.$quoteMeter=this.$(".quota-meter-container"),this.collection=new e.Collection,this.collection.on("add",function(t){n.$navbarTabs.append(new e.Tab({model:t}).render().$el)}).on("reset",function(){n.$navbarTabs.empty()}).on("dispatch",function(t){n.collection.each(function(e){t(e)})}).fetch(this.options),Galaxy.frame=this.frame=new i({collection:this.collection}),Galaxy.quotaMeter=this.quotaMeter=new o.UserQuotaMeter({model:Galaxy.user,el:this.$quoteMeter}),a(window).on("click",function(t){var e=a(t.target).closest("a[download]");1==e.length&&(0===a("iframe[id=download]").length&&a("body").append(a("<iframe/>").attr("id","download").hide()),a("iframe[id=download]").attr("src",e.attr("href")),t.preventDefault())}).on("beforeunload",function(){var t="";if(n.collection.each(function(e){var i=e.get("onbeforeunload")&&e.get("onbeforeunload")();i&&(t+=i+" ")}),""!==t)return t})},render:function(){return this.$navbarBrandTitle.html("Galaxy "+(this.options.brand&&"/ "+this.options.brand||"")),this.$navbarBrandLink.attr("href",this.options.logo_url),this.$navbarBrandImage.attr("src",this.options.logo_src),this.quotaMeter.render(),this},_template:function(){return'<div id="masthead" class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-header"><div class="navbar-tabs"/></div><div class="navbar-brand"><a class="navbar-brand-link"><img class="navbar-brand-image"/><span class="navbar-brand-title"/></a></div><div class="quota-meter-container"/><div class="navbar-icons"/></div>'}});return{View:n}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(1))},33:function(t,e,i){var o,n;(function(s,a,r,l){"use strict";o=[i(26)],n=function(t){var e=s.Collection.extend({model:s.Model.extend({defaults:{visible:!0,target:"_parent"}}),fetch:function(e){e=e||{},this.reset(),this.add({id:"analysis",title:"Analyze Data",url:"",tooltip:"Analysis home view"}),this.add({id:"workflow",title:"Workflow",url:"workflow",tooltip:"Chain tools into workflows",disabled:!Galaxy.user.id}),this.add({id:"shared",title:"Shared Data",url:"library/index",tooltip:"Access published resources",menu:[{title:"Data Libraries",url:"library/list"},{title:"Histories",url:"history/list_published"},{title:"Workflows",url:"workflow/list_published"},{title:"Visualizations",url:"visualization/list_published"},{title:"Pages",url:"page/list_published"}]}),e.user_requests&&this.add({id:"lab",title:"Lab",menu:[{title:"Sequencing Requests",url:"requests/index"},{title:"Find Samples",url:"requests/find_samples_index"},{title:"Help",url:e.lims_doc_url}]}),this.add({id:"visualization",title:"Visualization",url:"visualization/list",tooltip:"Visualize datasets",disabled:!Galaxy.user.id,menu:[{title:"New Track Browser",url:"visualization/trackster",target:"_frame"},{title:"Saved Visualizations",url:"visualization/list",target:"_frame"},{title:"Interactive Environments",url:"visualization/gie_list",target:"galaxy_main"}]}),Galaxy.user.get("is_admin")&&this.add({id:"admin",title:"Admin",url:"admin",tooltip:"Administer this Galaxy",cls:"admin-only"});var i={id:"help",title:"Help",tooltip:"Support, contact, and community hubs",menu:[{title:"Support",url:e.support_url,target:"_blank"},{title:"Search",url:e.search_url,target:"_blank"},{title:"Mailing Lists",url:e.mailing_lists,target:"_blank"},{title:"Videos",url:e.screencasts_url,target:"_blank"},{title:"Wiki",url:e.wiki_url,target:"_blank"},{title:"How to Cite Galaxy",url:e.citation_url,target:"_blank"},{title:"Interactive Tours",url:"tours",onclick:function(){Galaxy.app?Galaxy.app.display(new t.ToursView):window.location=Galaxy.root+"tours"}}]};if(e.terms_url&&i.menu.push({title:"Terms and Conditions",url:e.terms_url,target:"_blank"}),e.biostar_url&&i.menu.unshift({title:"Ask a question",url:"biostar/biostar_question_redirect",target:"_blank"}),e.biostar_url&&i.menu.unshift({title:"Galaxy Biostar",url:e.biostar_url_redirect,target:"_blank"}),this.add(i),Galaxy.user.id){var o={id:"user",title:"User",cls:"loggedin-only",tooltip:"Account preferences and saved data",menu:[{title:"Logged in as "+Galaxy.user.get("email")},{title:"Preferences",url:"user?cntrller=user",target:"galaxy_main"},{title:"Custom Builds",url:"user/dbkeys",target:"galaxy_main"},{title:"Logout",url:"user/logout",target:"_top",divider:!0},{title:"Saved Histories",url:"history/list",target:"galaxy_main"},{title:"Saved Datasets",url:"dataset/list",target:"galaxy_main"},{title:"Saved Pages",url:"page/list",target:"_top"},{title:"API Keys",url:"user/api_keys?cntrller=user",target:"galaxy_main"}]};e.use_remote_user&&o.menu.push({title:"Public Name",url:"user/edit_username?cntrller=user",target:"galaxy_main"}),this.add(o)}else{var o={id:"user",title:"User",cls:"loggedout-only",tooltip:"Account registration or login",menu:[{title:"Login",url:"user/login",target:"galaxy_main"}]};e.allow_user_creation&&o.menu.push({title:"Register",url:"user/create",target:"galaxy_main"}),this.add(o)}var n=this.get(e.active_view);return n&&n.set("active",!0),(new a.Deferred).resolve().promise()}}),i=s.View.extend({initialize:function(t){this.model=t.model,this.setElement(this._template()),this.$dropdown=this.$(".dropdown"),this.$toggle=this.$(".dropdown-toggle"),this.$menu=this.$(".dropdown-menu"),this.$note=this.$(".dropdown-note"),this.listenTo(this.model,"change",this.render,this)},events:{"click .dropdown-toggle":"_toggleClick"},render:function(){var t=this;return r(".tooltip").remove(),this.$el.attr("id",this.model.id).css({visibility:this.model.get("visible")&&"visible"||"hidden"}),this.model.set("url",this._formatUrl(this.model.get("url"))),this.$note.html(this.model.get("note")||"").removeClass().addClass("dropdown-note").addClass(this.model.get("note_cls")).css({display:this.model.get("show_note")&&"block"||"none"}),this.$toggle.html(this.model.get("title")||"").removeClass().addClass("dropdown-toggle").addClass(this.model.get("cls")).addClass(this.model.get("icon")&&"dropdown-icon fa "+this.model.get("icon")).addClass(this.model.get("toggle")&&"toggle").attr("target",this.model.get("target")).attr("href",this.model.get("url")).attr("title",this.model.get("tooltip")).tooltip("destroy"),this.model.get("tooltip")&&this.$toggle.tooltip({placement:"bottom"}),this.$dropdown.removeClass().addClass("dropdown").addClass(this.model.get("disabled")&&"disabled").addClass(this.model.get("active")&&"active"),this.model.get("menu")&&this.model.get("show_menu")?(this.$menu.show(),r("#dd-helper").show().off().on("click",function(){r("#dd-helper").hide(),t.model.set("show_menu",!1)})):(t.$menu.hide(),r("#dd-helper").hide()),this.$menu.empty().removeClass("dropdown-menu"),this.model.get("menu")&&(l.each(this.model.get("menu"),function(e){t.$menu.append(t._buildMenuItem(e)),e.divider&&t.$menu.append(r("<li/>").addClass("divider"))}),t.$menu.addClass("dropdown-menu"),t.$toggle.append(r("<b/>").addClass("caret"))),this},_buildMenuItem:function(t){var e=this;return t=l.defaults(t||{},{title:"",url:"",target:"_parent"}),t.url=e._formatUrl(t.url),r("<li/>").append(r("<a/>").attr("href",t.url).attr("target",t.target).html(t.title).on("click",function(i){i.preventDefault(),e.model.set("show_menu",!1),t.onclick?t.onclick():Galaxy.frame.add(t)}))},_toggleClick:function(t){var e=this,i=this.model;if(t.preventDefault(),r(".tooltip").hide(),i.trigger("dispatch",function(t){i.id!==t.id&&t.get("menu")&&t.set("show_menu",!1)}),i.get("disabled")){var o=function(t,e){return r("<div/>").append(r("<a/>").attr("href",Galaxy.root+e).html(t)).html()};this.$toggle.popover&&this.$toggle.popover("destroy"),this.$toggle.popover({html:!0,placement:"bottom",content:"Please "+o("login","user/login?use_panels=True")+" or "+o("register","user/create?use_panels=True")+" to use this feature."}).popover("show"),setTimeout(function(){e.$toggle.popover("destroy")},5e3)}else i.get("menu")?i.set("show_menu",!0):i.get("onclick")?i.get("onclick")():Galaxy.frame.add(i.attributes)},_formatUrl:function(t){return"string"==typeof t&&t.indexOf("//")===-1&&"/"!=t.charAt(0)?Galaxy.root+t:t},_template:function(){return'<ul class="nav navbar-nav"><li class="dropdown"><a class="dropdown-toggle"/><ul class="dropdown-menu"/><div class="dropdown-note"/></li></ul>'}});return{Collection:e,Tab:i}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(1),i(1),i(2))},34:function(t,e,i){var o,n;(function(s,a,r){"use strict";o=[i(32),i(10),i(8),i(6)],n=function(t,e,i,o){var n=s.View.extend(o.LoggableMixin).extend({_logNamespace:"layout",el:"body",className:"full-content",_panelIds:["left","center","right"],defaultOptions:{message_box_visible:!1,message_box_content:"",message_box_class:"info",show_inactivity_warning:!1,inactivity_box_content:""},initialize:function(e){this.log(this+".initialize:",e),a.extend(this,a.pick(e,this._panelIds)),this.options=a.defaults(a.omit(e.config,this._panelIds),this.defaultOptions),Galaxy.modal=this.modal=new i.View,this.masthead=new t.View(this.options),this.$el.attr("scroll","no"),this.$el.html(this._template()),this.$el.append(this.masthead.frame.$el),this.$("#masthead").replaceWith(this.masthead.$el),this.$el.append(this.modal.$el),this.$messagebox=this.$("#messagebox"),this.$inactivebox=this.$("#inactivebox")},render:function(){return r(".select2-hidden-accessible").remove(),this.log(this+".render:"),this.masthead.render(),this.renderMessageBox(),this.renderInactivityBox(),this.renderPanels(),this},renderMessageBox:function(){if(this.options.message_box_visible){var t=this.options.message_box_content||"",e=this.options.message_box_class||"info";this.$el.addClass("has-message-box"),this.$messagebox.attr("class","panel-"+e+"-message").html(t).toggle(!!t).show()}else this.$el.removeClass("has-message-box"),this.$messagebox.hide();
return this},renderInactivityBox:function(){if(this.options.show_inactivity_warning){var t=this.options.inactivity_box_content||"",e=r("<a/>").attr("href",Galaxy.root+"user/resend_verification").text("Resend verification");this.$el.addClass("has-inactivity-box"),this.$inactivebox.html(t+" ").append(e).toggle(!!t).show()}else this.$el.removeClass("has-inactivity-box"),this.$inactivebox.hide();return this},renderPanels:function(){var t=this;return this._panelIds.forEach(function(e){a.has(t,e)&&(t[e].setElement("#"+e),t[e].render())}),this.left||this.center.$el.css("left",0),this.right||this.center.$el.css("right",0),this},_template:function(){return['<div id="everything">','<div id="background"/>','<div id="masthead"/>','<div id="messagebox"/>','<div id="inactivebox" class="panel-warning-message" />',this.left?'<div id="left" />':"",this.center?'<div id="center" class="inbound" />':"",this.right?'<div id="right" />':"","</div>",'<div id="dd-helper" />'].join("")},hideSidePanels:function(){this.left&&this.left.hide(),this.right&&this.right.hide()},toString:function(){return"PageLayoutView"}});return{PageLayoutView:n}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(2),i(1))},35:function(t,e,i){var o,n;(function(s,a,r){"use strict";o=[i(16)],n=function(t){return s.View.extend({initialize:function(e){var i=this;e=e||{},this.frames=new t.View({visible:!1}),this.setElement(this.frames.$el),this.buttonActive=e.collection.add({id:"enable-scratchbook",icon:"fa-th",tooltip:"Enable/Disable Scratchbook",onclick:function(){i.active=!i.active,i.buttonActive.set({toggle:i.active,show_note:i.active,note_cls:i.active&&"fa fa-check"}),!i.active&&i.frames.hide()},onbeforeunload:function(){if(i.frames.length()>0)return"You opened "+i.frames.length()+" frame(s) which will be lost."}}),this.buttonLoad=e.collection.add({id:"show-scratchbook",icon:"fa-eye",tooltip:"Show/Hide Scratchbook",show_note:!0,visible:!1,onclick:function(t){i.frames.visible?i.frames.hide():i.frames.show()}}),this.frames.on("add remove",function(){this.visible&&0==this.length()&&this.hide(),i.buttonLoad.set({note:this.length(),visible:this.length()>0})}).on("show hide ",function(){i.buttonLoad.set({toggle:this.visible,icon:this.visible&&"fa-eye"||"fa-eye-slash"})}),this.history_cache={}},addDataset:function(t){var e=this,i=null;if(Galaxy&&Galaxy.currHistoryPanel){var o=Galaxy.currHistoryPanel.collection.historyId;this.history_cache[o]={name:Galaxy.currHistoryPanel.model.get("name"),dataset_ids:[]},Galaxy.currHistoryPanel.collection.each(function(t){!t.get("deleted")&&t.get("visible")&&e.history_cache[o].dataset_ids.push(t.get("id"))})}var n=function(t,i){if(t){var o=e.history_cache[t.get("history_id")];if(o&&o.dataset_ids){var n=o.dataset_ids,s=n.indexOf(t.get("id"));if(s!==-1&&s+i>=0&&s+i<n.length)return n[s+i]}}},s=function(t,o,s){var a=n(t,o);a?e._loadDataset(a,function(t,e){i=t,s.model.set(e)}):s.model.trigger("change")};this._loadDataset(t,function(t,o){i=t,e.add(a.extend({menu:[{icon:"fa fa-chevron-circle-left",tooltip:"Previous in History",onclick:function(t){s(i,-1,t)},disabled:function(){return!n(i,-1)}},{icon:"fa fa-chevron-circle-right",tooltip:"Next in History",onclick:function(t){s(i,1,t)},disabled:function(){return!n(i,1)}}]},o))})},_loadDataset:function(t,e){var o=this;i.e(1,function(i){(function(n,s){var a=[i(11)];(function(i){var a=new i.Dataset({id:t});n.when(a.fetch()).then(function(){var n=s.find(["tabular","interval"],function(t){return a.get("data_type").indexOf(t)!==-1}),r=a.get("name"),l=o.history_cache[a.get("history_id")];l&&(r=l.name+": "+r),e(a,n?{title:r,url:null,content:i.createTabularDatasetChunkedView({model:new i.TabularDataset(a.toJSON()),embedded:!0,height:"100%"}).$el}:{title:r,url:Galaxy.root+"datasets/"+t+"/display/?preview=True",content:null})})}).apply(null,a)}).call(this,i(1),i(2))})},addTrackster:function(t){var e=this;i.e(0,function(i){(function(o,n){var s=[i(30),i(92)];(function(i,s){var a=new i.Visualization({id:t});o.when(a.fetch()).then(function(){var t=new s.TracksterUI(Galaxy.root),i={title:a.get("name"),type:"other",content:function(e){var i={container:e,name:a.get("title"),id:a.id,dbkey:a.get("dbkey"),stand_alone:!1},o=a.get("latest_revision"),s=o.config.view.drawables;n.each(s,function(t){t.dataset={hda_ldda:t.hda_ldda,id:t.dataset_id}}),view=t.create_visualization(i,o.config.viewport,o.config.view.drawables,o.config.bookmarks,!1)}};e.add(i)})}).apply(null,s)}).call(this,i(1),i(2))})},add:function(t){if("_blank"==t.target)window.open(t.url);else if("_top"==t.target||"_parent"==t.target||"_self"==t.target)window.location=t.url;else if(this.active)this.frames.add(t);else{var e=r(window.parent.document).find("#galaxy_main");"galaxy_main"==t.target||"center"==t.target?0===e.length?window.location=t.url+(href.indexOf("?")==-1?"?":"&")+"use_panels=True":e.attr("src",t.url):window.location=t.url}}})}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(2),i(1))},62:function(t,e,i){var o,n;(function(s,a,r){"use strict";o=[i(6),i(5)],n=function(t,e){var i="user",o=s.View.extend(t.LoggableMixin).extend({_logNamespace:i,options:{warnAtPercent:85,errorAtPercent:100},initialize:function(t){this.log(this+".initialize:",t),a.extend(this.options,t),this.listenTo(this.model,"change:quota_percent change:total_disk_usage",this.render)},update:function(t){return this.log(this+" updating user data...",t),this.model.loadFromApi(this.model.get("id"),t),this},isOverQuota:function(){return null!==this.model.get("quota_percent")&&this.model.get("quota_percent")>=this.options.errorAtPercent},_render_quota:function(){var t=this.model.toJSON(),e=t.quota_percent,i=r(this._templateQuotaMeter(t)),o=i.find(".progress-bar");return this.isOverQuota()?(o.attr("class","progress-bar progress-bar-danger"),i.find(".quota-meter-text").css("color","white"),this.trigger("quota:over",t)):e>=this.options.warnAtPercent?(o.attr("class","progress-bar progress-bar-warning"),this.trigger("quota:under quota:under:approaching",t)):(o.attr("class","progress-bar progress-bar-success"),this.trigger("quota:under quota:under:ok",t)),i},_render_usage:function(){var t=r(this._templateUsage(this.model.toJSON()));return this.log(this+".rendering usage:",t),t},render:function(){var t=null;return this.log(this+".model.quota_percent:",this.model.get("quota_percent")),t=null===this.model.get("quota_percent")||void 0===this.model.get("quota_percent")?this._render_usage():this._render_quota(),this.$el.html(t),this.$el.find(".quota-meter-text").tooltip(),this},_templateQuotaMeter:function(t){return['<div id="quota-meter" class="quota-meter progress">','<div class="progress-bar" style="width: ',t.quota_percent,'%"></div>','<div class="quota-meter-text" style="top: 6px"',t.nice_total_disk_usage?' title="Using '+t.nice_total_disk_usage+'">':">",e("Using")," ",t.quota_percent,"%","</div>","</div>"].join("")},_templateUsage:function(t){return['<div id="quota-meter" class="quota-meter" style="background-color: transparent">','<div class="quota-meter-text" style="top: 6px; color: white">',t.nice_total_disk_usage?e("Using ")+t.nice_total_disk_usage:"","</div>","</div>"].join("")},toString:function(){return"UserQuotaMeter("+this.model+")"}});return{UserQuotaMeter:o}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(3),i(2),i(1))},66:function(t,e,i){var o,n;(function(i){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};o=[],n=function(){function t(t){t=t||{};var e=this;return e.userId=window.bootstrapped&&window.bootstrapped.user?window.bootstrapped.user.id:null,e.userId=e.userId||t.userId||null,e.consoleLogger=t.consoleLogger||null,e._init(t),e}function e(t){var e=this;return e._init(t||{})}return t.ALL=0,t.LOG=0,t.DEBUG=10,t.INFO=20,t.WARN=30,t.ERROR=40,t.METRIC=50,t.NONE=100,t.defaultOptions={logLevel:t.NONE,consoleLevel:t.NONE,defaultNamespace:"Galaxy",consoleNamespaceWhitelist:null,clientPrefix:"client.",maxCacheSize:3e3,postSize:1e3,addTime:!0,cacheKeyPrefix:"logs-",postUrl:"/api/metrics",delayPostInMs:6e5,getPingData:void 0,onServerResponse:void 0},t.prototype._init=function(e){var i=this;i.options={};for(var o in t.defaultOptions)t.defaultOptions.hasOwnProperty(o)&&(i.options[o]=e.hasOwnProperty(o)?e[o]:t.defaultOptions[o]);return i.options.logLevel=i._parseLevel(i.options.logLevel),i.options.consoleLevel=i._parseLevel(i.options.consoleLevel),i._sending=!1,i._waiting=null,i._postSize=i.options.postSize,i._initCache(),i},t.prototype._initCache=function(){try{this.cache=new e({maxSize:this.options.maxCacheSize,key:this.options.cacheKeyPrefix+this.userId})}catch(i){this._emitToConsole("warn","MetricsLogger",["Could not intitialize logging cache:",i]),this.options.logLevel=t.NONE}},t.prototype._parseLevel=function(e){var i="undefined"==typeof e?"undefined":s(e);if("number"===i)return e;if("string"===i){var o=e.toUpperCase();if(t.hasOwnProperty(o))return t[o]}throw new Error("Unknown log level: "+e)},t.prototype.emit=function(t,e,i){var o=this;return e=e||o.options.defaultNamespace,t&&i?(t=o._parseLevel(t),t>=o.options.logLevel&&o._addToCache(t,e,i),o.consoleLogger&&t>=o.options.consoleLevel&&o._emitToConsole(t,e,i),o):o},t.prototype._addToCache=function(t,e,i){this._emitToConsole("debug","MetricsLogger",["_addToCache:",arguments,this.options.addTime,this.cache.length()]);var o=this;try{var n=o.cache.add(o._buildEntry(t,e,i));n>=o._postSize&&o._postCache()}catch(s){o._emitToConsole("warn","MetricsLogger",["Metrics logger could not stringify logArguments:",e,i]),o._emitToConsole("error","MetricsLogger",[s])}return o},t.prototype._buildEntry=function(t,e,i){this._emitToConsole("debug","MetricsLogger",["_buildEntry:",arguments]);var o={level:t,namespace:this.options.clientPrefix+e,args:i};return this.options.addTime&&(o.time=(new Date).toISOString()),o},t.prototype._postCache=function(t){if(t=t||{},this._emitToConsole("info","MetricsLogger",["_postCache",t,this._postSize]),!this.options.postUrl||this._sending)return i.when({});var e=this,o=t.count||e._postSize,n=e.cache.get(o),s=n.length,a="function"==typeof e.options.getPingData?e.options.getPingData():{};return a.metrics=JSON.stringify(n),e._sending=!0,i.post(e.options.postUrl,a).always(function(){e._sending=!1}).fail(function(t,i,o){e._postSize=e.options.maxCacheSize,e.emit("error","MetricsLogger",["_postCache error:",t.readyState,t.status,t.responseJSON||t.responseText])}).done(function(t){"function"==typeof e.options.onServerResponse&&e.options.onServerResponse(t),e.cache.remove(s),e._postSize=e.options.postSize})},t.prototype._delayPost=function(){var t=this;t._waiting=setTimeout(function(){t._waiting=null},t.options.delayPostInMs)},t.prototype._emitToConsole=function(e,i,o){var n=this,s=n.options.consoleNamespaceWhitelist;if(!n.consoleLogger)return n;if(s&&s.indexOf(i)===-1)return n;var a=Array.prototype.slice.call(o,0);return a.unshift(i),e>=t.METRIC&&"function"==typeof n.consoleLogger.info?n.consoleLogger.info.apply(n.consoleLogger,a):e>=t.ERROR&&"function"==typeof n.consoleLogger.error?n.consoleLogger.error.apply(n.consoleLogger,a):(e>=t.WARN&&"function"==typeof n.consoleLogger.warn?n.consoleLogger.warn.apply(n.consoleLogger,a):e>=t.INFO&&"function"==typeof n.consoleLogger.info?n.consoleLogger.info.apply(n.consoleLogger,a):e>=t.DEBUG&&"function"==typeof n.consoleLogger.debug?n.consoleLogger.debug.apply(n.consoleLogger,a):"function"==typeof n.consoleLogger.log&&n.consoleLogger.log.apply(n.consoleLogger,a),n)},t.prototype.log=function(){this.emit(1,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},t.prototype.debug=function(){this.emit(t.DEBUG,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},t.prototype.info=function(){this.emit(t.INFO,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},t.prototype.warn=function(){this.emit(t.WARN,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},t.prototype.error=function(){this.emit(t.ERROR,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},t.prototype.metric=function(){this.emit(t.METRIC,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},e.defaultOptions={maxSize:5e3},e.prototype._init=function(t){if(!this._hasStorage())throw new Error("LoggingCache needs localStorage");if(!t.key)throw new Error("LoggingCache needs key for localStorage");return this.key=t.key,this._initStorage(),this.maxSize=t.maxSize||e.defaultOptions.maxSize,this},e.prototype._hasStorage=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}},e.prototype._initStorage=function(){return null===localStorage.getItem(this.key)?this.empty():this},e.prototype.add=function(t){var e=this,i=e._fetchAndParse(),o=i.length+1-e.maxSize;return o>0&&i.splice(0,o),i.push(t),e._unparseAndStore(i),i.length},e.prototype._fetchAndParse=function(){var t=this;return JSON.parse(localStorage.getItem(t.key))},e.prototype._unparseAndStore=function(t){var e=this;return localStorage.setItem(e.key,JSON.stringify(t))},e.prototype.length=function(){return this._fetchAndParse().length},e.prototype.get=function(t){return this._fetchAndParse().slice(0,t)},e.prototype.remove=function(t){var e=this._fetchAndParse(),i=e.splice(0,t);return this._unparseAndStore(e),i},e.prototype.empty=function(){return localStorage.setItem(this.key,"[]"),this},e.prototype.stringify=function(t){return JSON.stringify(this.get(t))},e.prototype.print=function(){console.log(JSON.stringify(this._fetchAndParse(),null,"  "))},{MetricsLogger:t,LoggingCache:e}}.apply(e,o),!(void 0!==n&&(t.exports=n))}).call(e,i(1))}});
//# sourceMappingURL=login.bundled.js.map