define(["libs/toastr","admin/repos-row-view","admin/repos-model"],function(a,b,c){var d=Backbone.View.extend({el:"#center",rowViews:{},defaults:{filter:"with_tools"},events:{"click #select-all-checkboxes":"selectAll"},initialize:function(a){this.options=_.defaults(this.options||{},a,this.defaults),this.collection=new c.Repos,this.listenTo(this.collection,"add",this.renderOne),this.render(),this.fetchRepos(),this.repaint()},render:function(a){this.options=_.extend(this.options,a);var b=this.templateRepoList();this.$el.html(b()),$("#center").css("overflow","auto"),this.$el.find("[data-toggle]").tooltip()},fetchRepos:function(){this.collection.fetch({success:function(){},error:function(){}})},repaint:function(a){this.options=_.extend(this.options,a),this.removeAllRows(),this.adjustMenu(),this.renderAll()},adjustMenu:function(a){this.options=_.extend(this.options,a),this.$el.find("li").removeClass("active"),$(".tab_"+this.options.filter).addClass("active")},updateRepoCounts:function(a){this.options=_.extend(this.options,a)},renderAll:function(a){this.options=_.extend(this.options,a);var b=this;_.each(this.collection.models.reverse(),function(a){"all"===b.options.filter?b.renderOne(a):b.options.filter===a.get("type")&&b.renderOne(a)})},renderOne:function(a){var c=new b.AdminReposRowView({repo:a});this.rowViews[a.get("id")]=c,this.$el.find("#repos_list_body").append(c.el)},removeOne:function(){},removeAllRows:function(){var a=this;this.$el.find(".repo-row").each(function(){var b=$(this).data("id");a.rowViews[b].remove()})},selectAll:function(a){var b=a.target.checked;that=this,$(":checkbox","#repos_list_body").each(function(){this.checked=b,view_id=$(this.parentElement.parentElement).data("id"),b?that.rowViews[view_id].turnDark():that.rowViews[view_id].turnLight()})},templateRepoList:function(){return _.template(['<div class="library_style_container">','<div class="repos_toolbar">',"<span><strong>REPOSITORIES</strong></span>",'<button data-toggle="tooltip" data-placement="top" title="Uninstall selected repositories" class="btn btn-default primary-button toolbar-item" type="button">',"Uninstall","</button>",'<button data-toggle="tooltip" data-placement="top" title="Update selected repositories" class="btn btn-default primary-button toolbar-item" type="button">',"Update","</button>",'<ul class="nav nav-tabs repos-nav">','<li role="presentation" class="tab_all"><a href="#all">All</a></li>','<li role="presentation" class="tab_with_tools"><a href="#repos">With Tools</a></li>','<li role="presentation" class="tab_tool_dependencies"><a href="#packages">Packages</a></li>','<li role="presentation" class="tab_suites"><a href="#packages">Suites</a></li>','<li role="presentation" class="tab_with_dm"><a href="#packages">Data Managers</a></li>','<li role="presentation" class="tab_with_datatypes"><a href="#packages">Datatypes</a></li>',"</ul>","</div>",'<div id="repositories_list">','<div class="repos_container table-responsive">','<table class="grid table table-condensed">',"<thead>",'<th style="text-align: center; width: 20px; " title="Check to select all repositories"><input id="select-all-checkboxes" style="margin: 0;" type="checkbox"></th>',"<th>",'<a class="sort-repos-link" title="Click to reverse order" href="#">',"Name","</a>","</th>","<th>Owner</th>","<th>Installation</th> ","<th>Category</th>","<th>Version</th>","<th>Date Installed</th>","</thead>",'<tbody id="repos_list_body">',"</tbody>","</table>","</div>","</div>","</div>"].join(""))}});return{AdminReposListView:d}});
//# sourceMappingURL=../../maps/admin/repos-list-view.js.map