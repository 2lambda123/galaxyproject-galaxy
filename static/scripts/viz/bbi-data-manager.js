define(["viz/visualization","libs/bbi/bigwig"],function(a,b){var c=a.GenomeDataManager.extend({load_data:function(a){var c=$.Deferred();this.set_data(a,c);{var d=Galaxy.root+"datasets/"+this.get("dataset").id+"/display",e=this;new $.Deferred}return $.when(b.makeBwg(d)).then(function(b){e.load_zoom_data(b,a,c)}),c},load_zoom_data:function(a,b,c){var d=this,e=15e3;$.when(a.readWigData(b.get("chrom"),b.get("start"),b.get("end"))).then(function(f){if(-1==a.zoom||f.length>e){var g=[],h={max:Number.MIN_VALUE};f.forEach(function(a){h.max!==a.min-1&&(g.push([h.max+1,0]),g.push([a.min-2,0])),g.push([a.min-1,a.score]),g.push([a.max,a.score]),h=a});var i={data:g,region:b,dataset_type:"bigwig"};d.set_data(b,i),c.resolve(i)}else d.load_zoom_data(a,b,c)})}});return{BBIDataManager:c}});
//# sourceMappingURL=../../maps/viz/bbi-data-manager.js.map