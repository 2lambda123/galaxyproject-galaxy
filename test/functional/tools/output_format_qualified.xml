<tool id="output_format_qualified" name="output_format_qualified" version="1.0.0" profile="21.01">
    <command><![CDATA[
echo 'test' > 3 &&
echo 'test' > 4
    ]]></command>
    <inputs>
        <param name="input_data_1" type="data" format="data" label="input_data_1" />
	    <!-- up to 21.01 references to parameters in sections were unqualified
             ie. format_source="input_data_1" would refer to the parameter in the
             section because it is defined later. with this test we acertain that
             the parameter in the section does not shadow the parameter above. 
        -->
        <section name="test_section" title="Test Section">
            <param name="input_data_1" type="data" format="data" label="input_data_1" />
	    </section>
    </inputs>
    <outputs>
        <data name="format_source_1_output" format_source="input_data_1" from_work_dir="3" />
        <data name="format_source_2_output" format_source="test_section|input_data_1" from_work_dir="4" />
    </outputs>
    <tests>
        <test>
            <param name="input_data_1" value="1.fastqsanger" ftype="fastqsanger" />
            <param name="test_section|input_data_1" value="1.txt" ftype="txt" />
            <output name="format_source_1_output" ftype="fastqsanger">
                <assert_contents>
                    <has_line line="test" />
                </assert_contents>
                <metadata name="created_from_basename" value="3" />
            </output>
            <output name="format_source_2_output" ftype="txt">
                <assert_contents>
                    <has_line line="test" />
                </assert_contents>
            </output>
        </test>
    </tests>
</tool>
